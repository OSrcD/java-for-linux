# 目录

  * [_version 用于控制乐观锁](#_version-用于控制乐观锁)
  * [_seq_no _primary_term](#_seq_no-_primary_term)
    * [文档发生改变 _seq_no 数值会累加的 在_primary_term中的位置 _primary_term 由谁去分配的 所在的一个位置 在集群里面 会有多个主分片 primary shard 它的位置会分配在某一个地方 相当于是在某一个地方分配的位置 为它做记录的一个编号](#文档发生改变-_seq_no-数值会累加的-在_primary_term中的位置-_primary_term-由谁去分配的-所在的一个位置-在集群里面-会有多个主分片-primary-shard-它的位置会分配在某一个地方-相当于是在某一个地方分配的位置-为它做记录的一个编号)
  * [版本号冲突](#版本号冲突)




![](https://tcs.teambition.net/storage/3121cdf0fac4bf5d33ca01a934b6846476c2?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjZGYwZmFjNGJmNWQzM2NhMDFhOTM0YjY4NDY0NzZjMiJ9.tUqBv8PJlsd0GfQQ3SMEboRq5Rw3QASpNq0pBolibhQ&download=2020-09-17%20174631.png "")

## _version 用于控制乐观锁

![](https://tcs.teambition.net/storage/31211559afca5917123fa79962587f5e4662?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExNTU5YWZjYTU5MTcxMjNmYTc5OTYyNTg3ZjVlNDY2MiJ9.vQuOfTtszQVM9eTEmXsT5aUqsvKx6lnhUJnGGD_BBVM&download=image.png "")

![](https://tcs.teambition.net/storage/312128b3ae588abda08eba831f3e0f2ff561?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyOGIzYWU1ODhhYmRhMDhlYmE4MzFmM2UwZjJmZjU2MSJ9.0OeHydpYMzq5rsoYFUxyHn9gnE7GLbthbt4nzLaTeIw&download=image.png "")

![](https://tcs.teambition.net/storage/3121c9aa67b8b50c05b0298c3845bd571805?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjOWFhNjdiOGI1MGMwNWIwMjk4YzM4NDViZDU3MTgwNSJ9.aFQ1VxkwmYwiM2VnUNFjmyxG8PgwaWWEmJsrG07hXik&download=image.png "")

![](https://tcs.teambition.net/storage/312188c4da24adb0ddad3f39082eb1c01cd9?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4OGM0ZGEyNGFkYjBkZGFkM2YzOTA4MmViMWMwMWNkOSJ9.EzjSSQYJQ0ZAc8yt6JOXTxJEv1fx4QP3Ncob4wM6d3A&download=image.png "")

![](https://tcs.teambition.net/storage/31216b33ff217cff5b58c0fc0569b86146de?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2YjMzZmYyMTdjZmY1YjU4YzBmYzA1NjliODYxNDZkZSJ9.t9_lkHrM47DNTqD9h-NEnJPSHHvrapZn_UvI25tgmC4&download=image.png "")

![](https://tcs.teambition.net/storage/31212bb58817d0d6931315b64c2e44b2ab82?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyYmI1ODgxN2QwZDY5MzEzMTViNjRjMmU0NGIyYWI4MiJ9.QHQE4OkaoW6s09xUeRGvpyuVfF4BgWRcPu1w7qaSljc&download=image.png "")

![](https://tcs.teambition.net/storage/3121c2e62d9675c64b7907754e0cc3488a38?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjMmU2MmQ5Njc1YzY0Yjc5MDc3NTRlMGNjMzQ4OGEzOCJ9.5SPY4WESFxB8br-9Ldim1FeAvLIV1WksctS3SloCxp0&download=image.png "")

## _seq_no _primary_term

### 文档发生改变 _seq_no 数值会累加的 在_primary_term中的位置 _primary_term 由谁去分配的 所在的一个位置 在集群里面 会有多个主分片 primary shard 它的位置会分配在某一个地方 相当于是在某一个地方分配的位置 为它做记录的一个编号 

![](https://tcs.teambition.net/storage/3121c55ec5d51f2d11159cfc25c73e69c6a0?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjNTVlYzVkNTFmMmQxMTE1OWNmYzI1YzczZTY5YzZhMCJ9.xJ1PrDcSPM7JS35t23OHOzyqfiwLqdFOyriKlvFva-8&download=image.png "")

![](https://tcs.teambition.net/storage/31218947e469f0e753ccf9d2c033a28988f7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4OTQ3ZTQ2OWYwZTc1M2NjZjlkMmMwMzNhMjg5ODhmNyJ9.mZiUmfakvsINYAU6k2iX89PHZYsfYqurt9k3oAGSCK4&download=image.png "")

![](https://tcs.teambition.net/storage/31212523432b74e6ecd973f0e8ec860cd368?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyNTIzNDMyYjc0ZTZlY2Q5NzNmMGU4ZWM4NjBjZDM2OCJ9.ZjGwgRhinsnnP3iuBT0fYtr37r1Rbfp_gl0mQEEgPT0&download=image.png "")

![](https://tcs.teambition.net/storage/3121614f2e2fdd33d54e8b4671c212daa00a?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MTRmMmUyZmRkMzNkNTRlOGI0NjcxYzIxMmRhYTAwYSJ9.Oua0rgivRf0o6IV02wB1sh1FcK6fVLU_JP5Yf3_25BU&download=image.png "")

## 版本号冲突

![](https://tcs.teambition.net/storage/3121b4522c735f46eb7a864ffae263e21c2e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFiNDUyMmM3MzVmNDZlYjdhODY0ZmZhZTI2M2UyMWMyZSJ9.i74qH5DJuRk1HIevQno_d8M-Wu8Kdip09_-1Lh47QdY&download=image.png "")

![](https://tcs.teambition.net/storage/31212092f7a5df0cc837638e28795920c60e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyMDkyZjdhNWRmMGNjODM3NjM4ZTI4Nzk1OTIwYzYwZSJ9.c4k6lCw0267EfYJAhKj18YkLlbvEq7NhEBxAFc8UjCA&download=image.png "")

![](https://tcs.teambition.net/storage/3121e05f380f542f0ad72e0bafaf320633f4?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlMDVmMzgwZjU0MmYwYWQ3MmUwYmFmYWYzMjA2MzNmNCJ9.4W4e5HDW5RBUJ5kTHCXLYbvmq0D0OI28vVMFZgTGvpE&download=image.png "")

![](https://tcs.teambition.net/storage/312188133d5692b64839f05fb5500accb902?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4ODEzM2Q1NjkyYjY0ODM5ZjA1ZmI1NTAwYWNjYjkwMiJ9.GUbZ1O5A5svMxMhhUWAELnAlsyP_MfHBZpVD0nv7ht0&download=image.png "")

> [__https://www.elastic.co/guide/en/elasticsearch/reference/current/optimistic-concurrency-control.html__](https://www.elastic.co/guide/en/elasticsearch/reference/current/optimistic-concurrency-control.html)

![](https://tcs.teambition.net/storage/312173da7442693eb262103d5ed40ed16cc0?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE3M2RhNzQ0MjY5M2ViMjYyMTAzZDVlZDQwZWQxNmNjMCJ9.VI8D9NvhtmIHLDziA_daHAf4f2n9mx2bbBB4d9Vt-bA&download=image.png "")

![](https://tcs.teambition.net/storage/3121610595f963c9160df846ca0e0b8ef066?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MTA1OTVmOTYzYzkxNjBkZjg0NmNhMGUwYjhlZjA2NiJ9.PI18WW151_u-NAWrwTHkAKj0IUOLW2oaNq66uRXeGTo&download=image.png "")

开源笔记

可 Pull Requests 协作写开源笔记

> [__gitee__](https://gitee.com/opendevel/java-for-linux)

> [__github__](https://github.com/OSrcD/java-for-linux)

> [__Teambition__](https://tburl.in/lPhmsyaa)

开源视频

[OSrcD的个人空间 - 哔哩哔哩 ( ゜- ゜)つロ 乾杯~ Bilibili](https://space.bilibili.com/77266754)

开源博客

[全部博文 - OpenDevel的个人空间 - OSCHINA](https://my.oschina.net/u/4675154?tab=newest&catalogId=0)

开源项目

[OSrcD (OpenDevel) - Gitee.com](https://gitee.com/OpenDevel)

[OSrcD - Overview](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDQ0Mzc5OSwiaWF0IjoxNjA5ODM4OTk5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.MM_XqDFzio8a-C3SpbjYZdp5sxOruVCwzJ8YZZmE5U0&download=image.png "")

请勿相信图片中任何联系方式

图片来源于视频 作者拿到视频学习已被第三方打码 没办法 截图也没时间去修改图片 请勿相信图片里的任何联系方式

谢谢

