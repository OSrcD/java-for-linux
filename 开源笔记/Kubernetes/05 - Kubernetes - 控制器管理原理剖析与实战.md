![](https://tcs.teambition.net/storage/3122554aad27edabbec90e98d67180bc5d42?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMzE5NTMxNiwiaWF0IjoxNjEyNTkwNTE2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI1NTRhYWQyN2VkYWJiZWM5MGU5OGQ2NzE4MGJjNWQ0MiJ9.pxfMY26a5uztn7UTWV3rJu0Iy7Lg2jKj3Ocpf5fvMk4&download=image.png "")

![](https://tcs.teambition.net/storage/3122d761318105b2ef57688033db34c83f7f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMzE5NTMxNiwiaWF0IjoxNjEyNTkwNTE2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJkNzYxMzE4MTA1YjJlZjU3Njg4MDMzZGIzNGM4M2Y3ZiJ9.zrqWkUXHrVOxHnPa5wkM-VZwNIWIwIMcKw7hZLRgqFk&download=image.png "")

![](https://tcs.teambition.net/storage/31221595aaebdfb29d1269ec4ce64f9ac070?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMzE5NTMxNiwiaWF0IjoxNjEyNTkwNTE2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIxNTk1YWFlYmRmYjI5ZDEyNjllYzRjZTY0ZjlhYzA3MCJ9.A9dxgypOclEnh30-5GH4rHG13fMBZBzEZx-VuJHT-Rw&download=image.png "")

![](https://tcs.teambition.net/storage/3122518b6ac5995e3176715a89b9ff966017?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMzE5NTMxNiwiaWF0IjoxNjEyNTkwNTE2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI1MThiNmFjNTk5NWUzMTc2NzE1YTg5YjlmZjk2NjAxNyJ9.kQ1EYmImYSC2n3tpledLR9Ae1bt5N4LYQ_GXarj3x0k&download=image.png "")

![](https://tcs.teambition.net/storage/31228c148a73650b2a1c2cd995ec43d759ab?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMzE5NTMxNiwiaWF0IjoxNjEyNTkwNTE2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4YzE0OGE3MzY1MGIyYTFjMmNkOTk1ZWM0M2Q3NTlhYiJ9.fzBmuMm3K6bpU-Ce00n_EFu76c3w4p90I9icOCprNEM&download=image.png "")

![](https://tcs.teambition.net/storage/3122e547ff4758162c6fcf62ab7507427056?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NTQwNiwiaWF0IjoxNjEyNTkwNjA2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJlNTQ3ZmY0NzU4MTYyYzZmY2Y2MmFiNzUwNzQyNzA1NiJ9.w3ZKCUKB2g7JkTnSAckedbQhcnYSW8MUh3KhaWXtH54&download=image.png "")

![](https://tcs.teambition.net/storage/31221f1f68547c5087136da441908c22de49?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NTQ3MCwiaWF0IjoxNjEyNTkwNjcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIxZjFmNjg1NDdjNTA4NzEzNmRhNDQxOTA4YzIyZGU0OSJ9.kT3jrwDbsI2siX20NOt_DYYjJw5Evqr1ngWwkEcXMuk&download=image.png "")

![](https://tcs.teambition.net/storage/3122708082941485999939a1f25107af4425?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NjAyMSwiaWF0IjoxNjEyNTkxMjIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI3MDgwODI5NDE0ODU5OTk5MzlhMWYyNTEwN2FmNDQyNSJ9.nDag6rFm2H3SYo3zsmQ3gwOKU2-y-O-URcvZoTA1yPs&download=image.png "")

```text
OpenDev@OpenDev:~$ ssh root@167.179.103.32
Last login: Sat Feb  6 02:36:50 2021 from 112.96.69.3
[root@k8s-master ~]# cd /home/software/
[root@k8s-master software]# vim ./mynginx-deployment.yaml 
[root@k8s-master software]# 查看历史
-bash: 查看历史: 未找到命令
[root@k8s-master software]# 查看历史^C
[root@k8s-master software]# 查看历史  ^C
[root@k8s-master software]# 查看历史/
-bash: 查看历史/: 没有那个文件或目录
[root@k8s-master software]# kubectl rollout history deployment
deployment.apps/nginx-deployment 
REVISION  CHANGE-CAUSE
1         <none>

[root@k8s-master software]# 可以把我们 这条命令 以 record 形式记录在 rollout history 里面 ^C
[root@k8s-master software]# kubectl apply -f mynginx-deployment.yaml --record
deployment.apps/nginx-deployment configured
[root@k8s-master software]# kubectl rollout history deployment
deployment.apps/nginx-deployment 
REVISION  CHANGE-CAUSE
1         <none>
2         kubectl apply --filename=mynginx-deployment.yaml --record=true

[root@k8s-master software]# kubectl get pod 
NAME                                READY   STATUS    RESTARTS   AGE
mynginx                             1/1     Running   0          155m
nginx-deployment-7b66f45f4c-cmkpc   1/1     Running   0          47s
nginx-deployment-7b66f45f4c-jlhj8   1/1     Running   0          46s
nginx-deployment-7b66f45f4c-mwmjd   1/1     Running   0          57s
nginx-deployment-7b66f45f4c-nqfsg   1/1     Running   0          57s
nginx-deployment-7b66f45f4c-zzbhg   1/1     Running   0          57s
[root@k8s-master software]# kubectl describe pod
Name:         mynginx
Namespace:    default
Priority:     0
Node:         k8s-node-2/104.238.151.169
Start Time:   Sat, 06 Feb 2021 03:21:07 +0000
Labels:       <none>
Annotations:  <none>
Status:       Running
IP:           10.244.2.7
IPs:
  IP:  10.244.2.7
Containers:
  nginx:
    Container ID:   docker://02bb6da068b9cebfca598b222133496b9081065cbc36e44b5eb169bf8b939304
    Image:          nginx:1.7.9
    Image ID:       docker-pullable://nginx@sha256:e3456c851a152494c3e4ff5fcc26f240206abac0c9d794affb40e0714846c451
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 06 Feb 2021 03:21:09 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ccfq4 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-ccfq4:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-ccfq4
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  disktype=ssd
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:          <none>


Name:         nginx-deployment-7b66f45f4c-cmkpc
Namespace:    default
Priority:     0
Node:         k8s-node-2/104.238.151.169
Start Time:   Sat, 06 Feb 2021 05:55:41 +0000
Labels:       name=web_server
              pod-template-hash=7b66f45f4c
Annotations:  <none>
Status:       Running
IP:           10.244.2.11
IPs:
  IP:           10.244.2.11
Controlled By:  ReplicaSet/nginx-deployment-7b66f45f4c
Containers:
  nginx:
    Container ID:   docker://06449605bb8fc01a76179214767a69f949a30fe8959125127db144721d04df15
    Image:          nginx:1.7.10
    Image ID:       docker-pullable://nginx@sha256:6fe2d0cb24dcb158dbdbff2949933ff6bde74f74efeb80839ce4de4b5a653b83
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 06 Feb 2021 05:55:42 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ccfq4 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-ccfq4:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-ccfq4
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  2m43s  default-scheduler  Successfully assigned default/nginx-deployment-7b66f45f4c-cmkpc to k8s-node-2
  Normal  Pulled     2m42s  kubelet            Container image "nginx:1.7.10" already present on machine
  Normal  Created    2m42s  kubelet            Created container nginx
  Normal  Started    2m42s  kubelet            Started container nginx


Name:         nginx-deployment-7b66f45f4c-jlhj8
Namespace:    default
Priority:     0
Node:         k8s-node-1/45.77.133.197
Start Time:   Sat, 06 Feb 2021 05:55:42 +0000
Labels:       name=web_server
              pod-template-hash=7b66f45f4c
Annotations:  <none>
Status:       Running
IP:           10.244.1.11
IPs:
  IP:           10.244.1.11
Controlled By:  ReplicaSet/nginx-deployment-7b66f45f4c
Containers:
  nginx:
    Container ID:   docker://75adadcbcd5f77d599e83c5da6b62b0e72a87cf94e385377ba9ca48618b25b27
    Image:          nginx:1.7.10
    Image ID:       docker-pullable://nginx@sha256:6fe2d0cb24dcb158dbdbff2949933ff6bde74f74efeb80839ce4de4b5a653b83
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 06 Feb 2021 05:55:43 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ccfq4 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-ccfq4:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-ccfq4
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  2m42s  default-scheduler  Successfully assigned default/nginx-deployment-7b66f45f4c-jlhj8 to k8s-node-1
  Normal  Pulled     2m41s  kubelet            Container image "nginx:1.7.10" already present on machine
  Normal  Created    2m41s  kubelet            Created container nginx
  Normal  Started    2m41s  kubelet            Started container nginx


Name:         nginx-deployment-7b66f45f4c-mwmjd
Namespace:    default
Priority:     0
Node:         k8s-node-2/104.238.151.169
Start Time:   Sat, 06 Feb 2021 05:55:31 +0000
Labels:       name=web_server
              pod-template-hash=7b66f45f4c
Annotations:  <none>
Status:       Running
IP:           10.244.2.10
IPs:
  IP:           10.244.2.10
Controlled By:  ReplicaSet/nginx-deployment-7b66f45f4c
Containers:
  nginx:
    Container ID:   docker://05a3434b9def66456de36e14cfd918d72b1819c5ae1071f6667c7080a1b22e49
    Image:          nginx:1.7.10
    Image ID:       docker-pullable://nginx@sha256:6fe2d0cb24dcb158dbdbff2949933ff6bde74f74efeb80839ce4de4b5a653b83
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 06 Feb 2021 05:55:41 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ccfq4 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-ccfq4:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-ccfq4
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  2m53s  default-scheduler  Successfully assigned default/nginx-deployment-7b66f45f4c-mwmjd to k8s-node-2
  Normal  Pulling    2m52s  kubelet            Pulling image "nginx:1.7.10"
  Normal  Pulled     2m43s  kubelet            Successfully pulled image "nginx:1.7.10" in 8.333564276s
  Normal  Created    2m43s  kubelet            Created container nginx
  Normal  Started    2m43s  kubelet            Started container nginx


Name:         nginx-deployment-7b66f45f4c-nqfsg
Namespace:    default
Priority:     0
Node:         k8s-node-1/45.77.133.197
Start Time:   Sat, 06 Feb 2021 05:55:31 +0000
Labels:       name=web_server
              pod-template-hash=7b66f45f4c
Annotations:  <none>
Status:       Running
IP:           10.244.1.10
IPs:
  IP:           10.244.1.10
Controlled By:  ReplicaSet/nginx-deployment-7b66f45f4c
Containers:
  nginx:
    Container ID:   docker://d6ca63e88ba82e72710f09a133cd1f3c3ef69bec0e8c3e65336dbfddbb990667
    Image:          nginx:1.7.10
    Image ID:       docker-pullable://nginx@sha256:6fe2d0cb24dcb158dbdbff2949933ff6bde74f74efeb80839ce4de4b5a653b83
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 06 Feb 2021 05:55:44 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ccfq4 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-ccfq4:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-ccfq4
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  2m53s  default-scheduler  Successfully assigned default/nginx-deployment-7b66f45f4c-nqfsg to k8s-node-1
  Normal  Pulling    2m52s  kubelet            Pulling image "nginx:1.7.10"
  Normal  Pulled     2m41s  kubelet            Successfully pulled image "nginx:1.7.10" in 11.325559718s
  Normal  Created    2m41s  kubelet            Created container nginx
  Normal  Started    2m40s  kubelet            Started container nginx


Name:         nginx-deployment-7b66f45f4c-zzbhg
Namespace:    default
Priority:     0
Node:         k8s-node-1/45.77.133.197
Start Time:   Sat, 06 Feb 2021 05:55:31 +0000
Labels:       name=web_server
              pod-template-hash=7b66f45f4c
Annotations:  <none>
Status:       Running
IP:           10.244.1.9
IPs:
  IP:           10.244.1.9
Controlled By:  ReplicaSet/nginx-deployment-7b66f45f4c
Containers:
  nginx:
    Container ID:   docker://0e73c0c892700c6f51ac81edf25f6d7f29231426fbcf9721861c7ec084c3b29b
    Image:          nginx:1.7.10
    Image ID:       docker-pullable://nginx@sha256:6fe2d0cb24dcb158dbdbff2949933ff6bde74f74efeb80839ce4de4b5a653b83
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 06 Feb 2021 05:55:41 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ccfq4 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-ccfq4:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-ccfq4
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  2m53s  default-scheduler  Successfully assigned default/nginx-deployment-7b66f45f4c-zzbhg to k8s-node-1
  Normal  Pulling    2m52s  kubelet            Pulling image "nginx:1.7.10"
  Normal  Pulled     2m44s  kubelet            Successfully pulled image "nginx:1.7.10" in 8.493498879s
  Normal  Created    2m43s  kubelet            Created container nginx
  Normal  Started    2m43s  kubelet            Started container nginx
[root@k8s-master software]# 

```

回滚

![](https://tcs.teambition.net/storage/312228378141757eff150058f27b8499d970?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NjMwNCwiaWF0IjoxNjEyNTkxNTA0LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIyODM3ODE0MTc1N2VmZjE1MDA1OGYyN2I4NDk5ZDk3MCJ9.cJKLIxA1IR7ktvkE37J1X4gbKplRBz9MSvCzny4SjjA&download=image.png "")

```shell
[root@k8s-master software]# 回滚版本 ^C
[root@k8s-master software]# kubectl rollout undo deployment --to-revision=1
deployment.apps/nginx-deployment rolled back
[root@k8s-master software]# kubectl rollout history deployment
deployment.apps/nginx-deployment 
REVISION  CHANGE-CAUSE
2         kubectl apply --filename=mynginx-deployment.yaml --record=true
3         <none>

[root@k8s-master software]# 

```

![](https://tcs.teambition.net/storage/3122e2152bf8c495780943589b0c3942ab24?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NjUwNSwiaWF0IjoxNjEyNTkxNzA1LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJlMjE1MmJmOGM0OTU3ODA5NDM1ODliMGMzOTQyYWIyNCJ9.8NUugHOMgNaK0tMPeylkYt6jDLicLBY7lXrbVdXEbqQ&download=image.png "")

![](https://tcs.teambition.net/storage/3122e58ec96f7d7ed541c3cb8293d3303e05?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NzAxMCwiaWF0IjoxNjEyNTkyMjEwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJlNThlYzk2ZjdkN2VkNTQxYzNjYjgyOTNkMzMwM2UwNSJ9.j-2yHRv5rZVW_ZClJRHcj3kWZ_-WtWI0x2-R34IUqgI&download=image.png "")

![](https://tcs.teambition.net/storage/312269f896e7bf104dfb0173640150bbed87?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NzA1MSwiaWF0IjoxNjEyNTkyMjUxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI2OWY4OTZlN2JmMTA0ZGZiMDE3MzY0MDE1MGJiZWQ4NyJ9.-kEt9J-Gw--hzNav94HWnH7G-rzM626xHGbyfJ6634I&download=image.png "")

![](https://tcs.teambition.net/storage/31227d459733b78b01992cae826087afa730?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NzI1MywiaWF0IjoxNjEyNTkyNDUzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI3ZDQ1OTczM2I3OGIwMTk5MmNhZTgyNjA4N2FmYTczMCJ9.Xh7CyyPExuG5np9mFQktPl7i580ln5sVpBeU12nqBc0&download=image.png "")

```text
[root@k8s-master software]# 系统 namespace ^C
[root@k8s-master software]# kubectl get daemonset --namespace=kube-system
NAME              DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE
kube-flannel-ds   3         3         3       3            3           <none>                   15h
kube-proxy        3         3         3       3            3           kubernetes.io/os=linux   15h
[root@k8s-master software]# 修改 daemonset ^C
[root@k8s-master software]# kubectl edit daemonset kube-proxy --namespace=kube-system
Edit cancelled, no changes made.
[root@k8s-master software]# kubectl get pod --namespace=kube-system | grep kube-proxy
kube-proxy-5rzwb                     1/1     Running   1          15h
kube-proxy-72prs                     1/1     Running   1          15h
kube-proxy-9bplp                     1/1     Running   1          15h
[root@k8s-master software]# 查看跑在那些节点 上^C
[root@k8s-master software]# kubectl get pod --namespace=kube-system -o wide | grep kube-proxy
kube-proxy-5rzwb                     1/1     Running   1          15h   10.25.96.3        k8s-master   <none>           <none>
kube-proxy-72prs                     1/1     Running   1          15h   104.238.151.169   k8s-node-2   <none>           <none>
kube-proxy-9bplp                     1/1     Running   1          15h   45.77.133.197     k8s-node-1   <none>           <none>
[root@k8s-master software]# 

```

![](https://tcs.teambition.net/storage/3122b5da57165c9d45cdc6828260d9da429c?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5NzM3NywiaWF0IjoxNjEyNTkyNTc3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJiNWRhNTcxNjVjOWQ0NWNkYzY4MjgyNjBkOWRhNDI5YyJ9.VxsqD-3OZ1J-HRtrBN8S0OJVwR9gcgoc2KVoaFAEnGo&download=image.png "")

![](https://tcs.teambition.net/storage/3122143f5dac7727f5665a7ed739f84ab133?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5ODA3NCwiaWF0IjoxNjEyNTkzMjc0LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIxNDNmNWRhYzc3MjdmNTY2NWE3ZWQ3MzlmODRhYjEzMyJ9.3beUQKchu90yIV_gWR86PMg0R5QhLzcoqfKr2hWmAmU&download=image.png "")

```yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: hello
spec:
  template:
   metadata:
     name: hello
   spec:
     containers:
     - name: hello
       image: busybox
       command: ["echo","hello from openDevel"]
      # 我跑一个任务 完成我这个任务就好了 job 一次性 
     restartPolicy: Never

```

![](https://tcs.teambition.net/storage/3122ab6a0076bae4004a601949f702b68dca?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5ODIyMCwiaWF0IjoxNjEyNTkzNDIwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJhYjZhMDA3NmJhZTQwMDRhNjAxOTQ5ZjcwMmI2OGRjYSJ9.aswdP6X2IF0dQ2aLM0f9aBLWqRu5RxrpZADzBiAWw9c&download=image.png "")

```text
[root@k8s-master software]# pwd
/home/software
[root@k8s-master software]# vim hello.yaml 
[root@k8s-master software]# kubectl apply -f hello.yaml 
error: error parsing hello.yaml: error converting YAML to JSON: yaml: line 8: did not find expected key
[root@k8s-master software]# kubectl apply -f hello.yaml 
error: error parsing hello.yaml: error converting YAML to JSON: yaml: line 8: did not find expected key
[root@k8s-master software]# vim hello.yaml 
[root@k8s-master software]# kubectl apply -f hello.yaml 
error: error parsing hello.yaml: error converting YAML to JSON: yaml: line 8: did not find expected key
[root@k8s-master software]# vim hello.yaml 
[root@k8s-master software]# kubectl apply -f hello.yaml 
job.batch/hello created
[root@k8s-master software]# vim hello.yaml 
[root@k8s-master software]# kubectl get job
NAME    COMPLETIONS   DURATION   AGE
hello   1/1           6s         45s
[root@k8s-master software]# kubectl logs job hello
Error from server (NotFound): pods "job" not found
[root@k8s-master software]# kubectl get pod
NAME                               READY   STATUS      RESTARTS   AGE
hello-m8vl2                        0/1     Completed   0          93s
mynginx                            1/1     Running     0          3h14m
nginx-deployment-cc8867d59-5455h   1/1     Running     0          31m
nginx-deployment-cc8867d59-6z8t2   1/1     Running     0          31m
nginx-deployment-cc8867d59-bs9qk   1/1     Running     0          31m
nginx-deployment-cc8867d59-xnd9f   1/1     Running     0          31m
nginx-deployment-cc8867d59-xw9zd   1/1     Running     0          31m
[root@k8s-master software]# kubectl logs pod hello-m8vl2
Error from server (NotFound): pods "pod" not found
[root@k8s-master software]# kubectl logs hello-m8vl2
hello from openDevel
[root@k8s-master software]# 

```

![](https://tcs.teambition.net/storage/3122dc0088565a7fc7090c74b2176d5783bc?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5ODQxMiwiaWF0IjoxNjEyNTkzNjEyLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJkYzAwODg1NjVhN2ZjNzA5MGM3NGIyMTc2ZDU3ODNiYyJ9.7Qr04HgPc7gVV9eWJa4enzJtrVjZYsFOnOTZXf1e9tE&download=image.png "")

![](https://tcs.teambition.net/storage/3122c8e27e2353c5048620af4e880073f857?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMzE5ODYzOSwiaWF0IjoxNjEyNTkzODM5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJjOGUyN2UyMzUzYzUwNDg2MjBhZjRlODgwMDczZjg1NyJ9.bSg-hnd15IIaxSR0DXSKNlfNI5-wkiAz8X49CX4q8A8&download=image.png "")



开源笔记

可 Pull Requests 协作写开源笔记

如果笔记图片无法访问 请访问 [teambition](https://tburl.in/0jDNvpbK) 原版开源笔记

gitee

[https://gitee.com/opendevel/java-for-linux](https://gitee.com/opendevel/java-for-linux)

github

[https://github.com/OSrcD/java-for-linux](https://github.com/OSrcD/java-for-linux)

teambition

[https://tburl.in/0jDNvpbK](https://tburl.in/0jDNvpbK)

开源视频

bilibili

[https://space.bilibili.com/77266754](https://space.bilibili.com/77266754)

开源博客

oschina

[https://my.oschina.net/u/4675154](https://my.oschina.net/u/4675154)

csdn

[https://blog.csdn.net/OpenDevel](https://blog.csdn.net/OpenDevel)

开源项目

gitee

[https://gitee.com/opendevel](https://gitee.com/opendevel)

github

[https://github.com/OSrcD](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMzE5NTMxNiwiaWF0IjoxNjEyNTkwNTE2LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.z8Pgz2F8te8hWSteYAeYWhs3YpDGkQitAVWo8VXMmbU&download=image.png "")

