![](https://tcs.teambition.net/storage/3121bf7a0ff7a7d3d4d9257e87f94892831d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFiZjdhMGZmN2E3ZDNkNGQ5MjU3ZTg3Zjk0ODkyODMxZCJ9.CdBeiTR5ndA3K4QBRhY9iNXIaWDREvOTDNUXQzis1Wg&download=image.png "")

![](https://tcs.teambition.net/storage/312111da76ba257c250f835d9fd1f23adad4?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExMWRhNzZiYTI1N2MyNTBmODM1ZDlmZDFmMjNhZGFkNCJ9.DoTdja-boDMNTEZN0gF_mdFksbXXajsoJeH9-hU2dOY&download=image.png "")

![](https://tcs.teambition.net/storage/3121e3883d3abc3ca6a7319ff55f65c8fc76?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlMzg4M2QzYWJjM2NhNmE3MzE5ZmY1NWY2NWM4ZmM3NiJ9.3Sdf7I-Y2JVrH7znLpnWXb1s-6r80k8tSc-1Mf-BeKo&download=image.png "")

![](https://tcs.teambition.net/storage/31212b78077d15d55d87638635d1f05f1827?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyYjc4MDc3ZDE1ZDU1ZDg3NjM4NjM1ZDFmMDVmMTgyNyJ9.WsiTn4w9jYHLdeGsFfPax-oxer-9rl0UXLcAbhWXLs8&download=image.png "")

```java
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>foodie-cloud</artifactId>
        <groupId>com.imooc</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>foodie-item-pojo</artifactId>

    <dependencies>
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate.validator</groupId>
            <artifactId>hibernate-validator</artifactId>
        </dependency>
    </dependencies>

</project>

```

## 复制

![](https://tcs.teambition.net/storage/312116971b9b0a97a1021bf4f7746d575e47?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExNjk3MWI5YjBhOTdhMTAyMWJmNGY3NzQ2ZDU3NWU0NyJ9.eYyI65YrWmd_nhS0QHEAfyO1B3oYTtq-t6pw5xnJe8U&download=image.png "")

![](https://tcs.teambition.net/storage/3121b247a058b7e5fe8286810d097c2cf3d6?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFiMjQ3YTA1OGI3ZTVmZTgyODY4MTBkMDk3YzJjZjNkNiJ9.OQuaPFIMbrlJTFlP1dc6w2dX4s4cW74gZxPIeIvOpCA&download=image.png "")

## 复制

![](https://tcs.teambition.net/storage/312109f768357ec0341f311c8781098a92ad?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwOWY3NjgzNTdlYzAzNDFmMzExYzg3ODEwOThhOTJhZCJ9.JiyKT9EU9GrsdgnpJ1ld555nG11EmYr2DCw8CBbf_vI&download=image.png "")

![](https://tcs.teambition.net/storage/31216106edf9d37553acaf714c089b4a0cf4?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MTA2ZWRmOWQzNzU1M2FjYWY3MTRjMDg5YjRhMGNmNCJ9.YyXIcLN3LW2u6n9QWI8rJd2-J5xWclN7S-vsYa2P9N0&download=image.png "")

## 修改

![](https://tcs.teambition.net/storage/3121c1cd959601864679b574a42d469caffb?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjMWNkOTU5NjAxODY0Njc5YjU3NGE0MmQ0NjljYWZmYiJ9.HH_F9q6MlOJ87IaI8tRYjHsipa-WFBnKYC9_5wegwUI&download=image.png "")

```java
package com.imooc.item.pojo.vo;

import com.imooc.item.pojo.Items;
import com.imooc.item.pojo.ItemsImg;
import com.imooc.item.pojo.ItemsParam;
import com.imooc.item.pojo.ItemsSpec;

import java.util.List;

/**
 * 商品详情VO
 */
public class ItemInfoVO {
    private Items item;
    private List<ItemsImg> itemImgList;
    private List<ItemsSpec> itemSpecList;
    private ItemsParam itemParams;

    public Items getItem() {
        return item;
    }

    public void setItem(Items item) {
        this.item = item;
    }

    public List<ItemsImg> getItemImgList() {
        return itemImgList;
    }

    public void setItemImgList(List<ItemsImg> itemImgList) {
        this.itemImgList = itemImgList;
    }

    public List<ItemsSpec> getItemSpecList() {
        return itemSpecList;
    }

    public void setItemSpecList(List<ItemsSpec> itemSpecList) {
        this.itemSpecList = itemSpecList;
    }

    public ItemsParam getItemParams() {
        return itemParams;
    }

    public void setItemParams(ItemsParam itemParams) {
        this.itemParams = itemParams;
    }
}


```

![](https://tcs.teambition.net/storage/3121e4b142e85ad7ba84a9939a2f935fa8cd?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlNGIxNDJlODVhZDdiYTg0YTk5MzlhMmY5MzVmYThjZCJ9.c5vaRiMZfUwO-wrtGLwoO2yk2YeOfPIEjHrEqnu-o1o&download=image.png "")

![](https://tcs.teambition.net/storage/31218de8a3e01972e6f0dbb4b2d21a7b1c5b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4ZGU4YTNlMDE5NzJlNmYwZGJiNGIyZDIxYTdiMWM1YiJ9.ZSiglkcUy9tCOviMlD8KDdXRV-3FXpJQ8U6ZiVLytqo&download=image.png "")

![](https://tcs.teambition.net/storage/31215aa03f906ef35cdd781616aeb63595dd?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE1YWEwM2Y5MDZlZjM1Y2RkNzgxNjE2YWViNjM1OTVkZCJ9.ND8eXu6mqByYYO-T9k3hQrDHF7Q0H2Hy8GhX6CaZJTM&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>foodie-cloud</artifactId>
        <groupId>com.imooc</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>foodie-item-mapper</artifactId>

    <dependencies>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>foodie-item-pojo</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>foodie-cloud-common</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>

</project>

```

## 复制

![](https://tcs.teambition.net/storage/31216223627efdb0d06537d982e48e46a49b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MjIzNjI3ZWZkYjBkMDY1MzdkOTgyZTQ4ZTQ2YTQ5YiJ9.fOZLRE-lGGBCHB0mbF9fyv1v4uEw1q8C2XGfAXT6rAE&download=image.png "")

## 重新导入

![](https://tcs.teambition.net/storage/3121c466cc5bda20ad79f25a233fc36a20ef?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjNDY2Y2M1YmRhMjBhZDc5ZjI1YTIzM2ZjMzZhMjBlZiJ9.fD3lylpHNy0HTRBUfafvgQ6bgN90aEUkKYUnjHBTFGg&download=image.png "")

```java
package com.imooc.item.mapper;


import com.imooc.item.pojo.ItemsComments;
import com.imooc.my.mapper.MyMapper;

public interface ItemsCommentsMapper extends MyMapper<ItemsComments> {
}
```

![](https://tcs.teambition.net/storage/312134afe3d13519ad22fc05c161be0c1141?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzNGFmZTNkMTM1MTlhZDIyZmMwNWMxNjFiZTBjMTE0MSJ9.oaqlpPfPIZF9CelH1pYUqn8wXd-TBey7XsUkjow6FHU&download=image.png "")

```java
package com.imooc.item.mapper;

import com.imooc.item.pojo.ItemsComments;
import com.imooc.item.pojo.vo.MyCommentVO;
import com.imooc.my.mapper.MyMapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;
import java.util.Map;

public interface ItemsCommentsMapperCustom extends MyMapper<ItemsComments> {

    public void saveComments(Map<String, Object> map);


    public List<MyCommentVO> queryMyComments(@Param("paramsMap") Map<String,Object> map);

}

```

![](https://tcs.teambition.net/storage/3121ac3fc2056fb756134d120ae62389c018?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhYzNmYzIwNTZmYjc1NjEzNGQxMjBhZTYyMzg5YzAxOCJ9.Dbv-V1csMFtxWSulkap2Oh834SAzEIcWR7LdUfWGZYc&download=image.png "")

```java
package com.imooc.item.mapper;

import com.imooc.item.pojo.ItemsImg;
import com.imooc.my.mapper.MyMapper;

public interface ItemsImgMapper extends MyMapper<ItemsImg> {
}

```

![](https://tcs.teambition.net/storage/3121d34fc7ec702a70e7e79aa7e68a8f6f50?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkMzRmYzdlYzcwMmE3MGU3ZTc5YWE3ZTY4YThmNmY1MCJ9.MpcP_X9R3b-4robmW_U0VuASvFw5bzsBWG_zrC61f04&download=image.png "")

```java
package com.imooc.item.mapper;

import com.imooc.item.pojo.vo.ItemCommentVO;
import com.imooc.item.pojo.vo.ShopcartVO;
import org.apache.ibatis.annotations.Param;

import java.util.List;
import java.util.Map;

public interface ItemsMapperCustom {

    public List<ItemCommentVO> queryItemComments(@Param("paramsMap") Map<String,Object> map);

    // TODO 迁移到foodie-search模块
//    public List<SearchItemsVO> searchItems(@Param("paramsMap") Map<String,Object> map);
//
//    public List<SearchItemsVO> searchItemsByThirdCat(@Param("paramsMap") Map<String,Object> map);

    public List<ShopcartVO> queryItemsBySpecIds(@Param("paramsList") List specIdsList);

    public int decreaseItemSpecStock(@Param("specId") String specId,
                                      @Param("pendingCounts") Integer pendingCounts);
}


```

## 复制

![](https://tcs.teambition.net/storage/31216c91ac7265c5ea12a594d609022c9204?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2YzkxYWM3MjY1YzVlYTEyYTU5NGQ2MDkwMjJjOTIwNCJ9.nx-BT3465acELvR3oBY1gLaxoY7y604PDejhe_F2etY&download=image.png "")

![](https://tcs.teambition.net/storage/312165bf529d919e64fbc71174d9fb35de71?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2NWJmNTI5ZDkxOWU2NGZiYzcxMTc0ZDlmYjM1ZGU3MSJ9.me2qnhenrbPjLNA8L68eBVm_vtTPhA-d_wY4NbWn9jQ&download=image.png "")

## 修改路径

![](https://tcs.teambition.net/storage/3121832aa34a61f883bd11c06b54a2e17f12?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4MzJhYTM0YTYxZjg4M2JkMTFjMDZiNTRhMmUxN2YxMiJ9.8YHD7tIGBx5OiptLMbb1kvL8tQJiKOJQbgWaQFu5u04&download=image.png "")

```java
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.mapper.ItemsCommentsMapper">
  <resultMap id="BaseResultMap" type="com.imooc.item.pojo.ItemsComments">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="item_id" jdbcType="VARCHAR" property="itemId" />
    <result column="item_name" jdbcType="VARCHAR" property="itemName" />
    <result column="item_spec_id" jdbcType="VARCHAR" property="itemSpecId" />
    <result column="sepc_name" jdbcType="VARCHAR" property="sepcName" />
    <result column="comment_level" jdbcType="INTEGER" property="commentLevel" />
    <result column="content" jdbcType="VARCHAR" property="content" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="updated_time" jdbcType="TIMESTAMP" property="updatedTime" />
  </resultMap>
</mapper>

```

## 注释掉

![](https://tcs.teambition.net/storage/31213740f415d43b18328384ed94dde07d87?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzNzQwZjQxNWQ0M2IxODMyODM4NGVkOTRkZGUwN2Q4NyJ9.0HGycOCTyBFr3gPVtuxwW68VYTm5U2Dnr7LnDr1Mu6g&download=image.png "")

![](https://tcs.teambition.net/storage/3121d1c8db76dbcff3a364f58d95b270b1fb?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkMWM4ZGI3NmRiY2ZmM2EzNjRmNThkOTViMjcwYjFmYiJ9.SmA65Y6DqK52rwRx_rnjZdNxTntM8Pj_T5LCflB3Q5E&download=image.png "")

![](https://tcs.teambition.net/storage/31216fa1ed763c7e5cb60f10017a50b49d74?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2ZmExZWQ3NjNjN2U1Y2I2MGYxMDAxN2E1MGI0OWQ3NCJ9.oRfZUvlmS1ageWFaYrjeXTE0bwZCRlzP6GZlLMfb7lE&download=image.png "")

![](https://tcs.teambition.net/storage/3121deaf1e209f75b2e91136cce46681d309?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkZWFmMWUyMDlmNzViMmU5MTEzNmNjZTQ2NjgxZDMwOSJ9.XYjq44hMXQFpzff0sThDZC2cesGhufRmHQ7_Zty14dw&download=image.png "")

![](https://tcs.teambition.net/storage/3121d40b34f0e899ccd36fa930738f874cf3?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkNDBiMzRmMGU4OTljY2QzNmZhOTMwNzM4Zjg3NGNmMyJ9.Jh4cP99mhFDuGThabbtQ3VrSjx0CbwKMwDCr_nyikLc&download=image.png "")

![](https://tcs.teambition.net/storage/31211954663f7d7ac35727c2a92604a998dc?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExOTU0NjYzZjdkN2FjMzU3MjdjMmE5MjYwNGE5OThkYyJ9.YcyNQ80p7bq3nCCANAMefOkkYPT-WtEXCIwDa17LUDU&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.item.mapper.ItemsMapperCustom">
    <select id="queryItemComments" parameterType="Map" resultType="com.imooc.item.item.pojo.vo.ItemCommentVO">
        SELECT
            ic.comment_level as commentLevel,
            ic.content as content,
            ic.sepc_name as sepcName,
            ic.created_time as createdTime,
            u.face as userFace,
            u.nickname as nickname
        FROM
            items_comments ic
        LEFT JOIN
            users u
        ON
            ic.user_id = u.id
        WHERE
            ic.item_id = #{paramsMap.itemId}
        <if test=" paramsMap.level != null and paramsMap.level != '' ">
            AND ic.comment_level = #{paramsMap.level}
        </if>
    </select>

    <!--<select id="searchItems" parameterType="Map" resultType="com.imooc.item.item.pojo.vo.SearchItemsVO">
    SELECT
        i.id as itemId,
        i.item_name as itemName,
        i.sell_counts as sellCounts,
        ii.url as imgUrl,
        tempSpec.price_discount as price
    FROM
        items i
    LEFT JOIN
        items_img ii
    ON
        i.id = ii.item_id
    LEFT JOIN
        (SELECT item_id,MIN(price_discount) as price_discount FROM items_spec GROUP BY item_id) tempSpec
    ON
        i.id = tempSpec.item_id
    WHERE
        ii.is_main = 1
        <if test="paramsMap.keywords != null and paramsMap.keywords != ''">
            AND i.item_name like '%${paramsMap.keywords}%'
        </if>
        ORDER BY
        <choose>
            <when test="paramsMap.sort == &quot;c&quot;">
                i.sell_counts desc
            </when>

            <when test="paramsMap.sort == &quot;p&quot;">
                tempSpec.price_discount asc
            </when>
            <otherwise>
                i.item_name asc
            </otherwise>
        </choose>
    </select>
    &lt;!&ndash; k：默认，代表默认排序，根据name &ndash;&gt;
    &lt;!&ndash; c：根据销量排序 &ndash;&gt;
    &lt;!&ndash; p：根据价格排序 &ndash;&gt;

    <select id="searchItemsByThirdCat" parameterType="Map" resultType="com.imooc.item.item.pojo.vo.SearchItemsVO">
        SELECT
            i.id as itemId,
            i.item_name as itemName,
            i.sell_counts as sellCounts,
            ii.url as imgUrl,
            tempSpec.price_discount as price
        FROM
            items i
        LEFT JOIN
            items_img ii
        ON
            i.id = ii.item_id
        LEFT JOIN
            (SELECT item_id,MIN(price_discount) as price_discount FROM items_spec GROUP BY item_id) tempSpec
        ON
            i.id = tempSpec.item_id
        WHERE
            ii.is_main = 1
            AND
            i.cat_id = #{paramsMap.catId}
        ORDER BY
        <choose>
            <when test="paramsMap.sort == &quot;c&quot;">
                i.sell_counts desc
            </when>

            <when test="paramsMap.sort == &quot;p&quot;">
                tempSpec.price_discount asc
            </when>
            <otherwise>
                i.item_name asc
            </otherwise>
        </choose>
    </select>-->

    <select id="queryItemsBySpecIds" parameterType="List" resultType="com.imooc.item.item.pojo.vo.ShopcartVO">
        SELECT
            t_items.id as itemId,
            t_items.item_name as itemName,
            t_items_img.url as itemImgUrl,
            t_items_spec.id as specId,
            t_items_spec.`name` as specName,
            t_items_spec.price_discount as priceDiscount,
            t_items_spec.price_normal as priceNormal
        FROM
            items_spec t_items_spec
        LEFT JOIN
            items t_items
        ON
            t_items.id = t_items_spec.item_id
        LEFT JOIN
            items_img t_items_img
        ON
            t_items_img.item_id = t_items.id
        WHERE
            t_items_img.is_main = 1
            AND
                t_items_spec.id IN
                <foreach collection="paramsList" index="index" item="specId" open="(" separator="," close=")">
                    #{specId}
                </foreach>
    </select>

    <update id="decreaseItemSpecStock">

        update
            items_spec
        SET
            stock = stock - #{pendingCounts}
        WHERE
            id = #{specId}
        AND
            stock >= #{pendingCounts}
    </update>

</mapper>

```

![](https://tcs.teambition.net/storage/3121affa0b390de8550b9c23fb4d4ffdef50?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZmZhMGIzOTBkZTg1NTBiOWMyM2ZiNGQ0ZmZkZWY1MCJ9.JG7mRFPCkMIPWT5aujHZWOIswtFvaGs_455MSyF9Sjw&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.mapper.ItemsCommentsMapperCustom">

    <select id="saveComments" parameterType="Map">

        INSERT INTO
        items_comments
        (
        id,
        user_id,
        item_id,
        item_name,
        item_spec_id,
        sepc_name,
        comment_level,
        content,
        created_time,
        updated_time
        )
        VALUES
        <foreach collection="commentList" item="item" index="index" separator=",">
            (
            #{item.commentId},
            #{userId},
            #{item.itemId},
            #{item.itemName},
            #{item.itemSpecId},
            #{item.itemSpecName},
            #{item.commentLevel},
            #{item.content},
            now(),
            now()
            )
        </foreach>


    </select>

    <resultMap id="myComments" type="com.imooc.item.pojo.vo.MyCommentVO">
        <id column="commentId" property="commentId" />
        <result column="content" property="content" />
        <result column="createdTime" property="createdTime" />
        <result column="itemId" property="itemId" />
        <result column="itemName" property="itemName" />
        <result column="sepcName" property="specName" />
        <result column="itemImg" property="itemImg" />
    </resultMap>


    <select id="queryMyComments" parameterType="Map" resultMap="myComments">
     SELECT
        ic.id as commentId,
        ic.content as content,
        ic.created_time as createdTime,
        ic.item_id as itemId,
        ic.item_name as itemName,
        ic.sepc_name as sepcName,
        ii.url as itemImg
    FROM
        items_comments ic
    LEFT JOIN
        items_img ii
    ON
        ic.item_id = ii.item_id
    WHERE
        ic.user_id = #{paramsMap.userId}
    AND
        ii.is_main = 1
    ORDER BY
        ic.created_time
    DESC

    </select>


</mapper>

```

![](https://tcs.teambition.net/storage/3121d895de6027ae2bcf95120f237d9a54d7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkODk1ZGU2MDI3YWUyYmNmOTUxMjBmMjM3ZDlhNTRkNyJ9.UAN5w4RskWaKKRcXMFihOLBQBJVhwcKjqMuPujthQFY&download=image.png "")

```java
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.mapper.ItemsImgMapper">
  <resultMap id="BaseResultMap" type="com.imooc.item.pojo.ItemsImg">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="item_id" jdbcType="VARCHAR" property="itemId" />
    <result column="url" jdbcType="VARCHAR" property="url" />
    <result column="sort" jdbcType="INTEGER" property="sort" />
    <result column="is_main" jdbcType="INTEGER" property="isMain" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="updated_time" jdbcType="TIMESTAMP" property="updatedTime" />
  </resultMap>
</mapper>

```

![](https://tcs.teambition.net/storage/312153e7b58175b2fbbd9b959eee958f138d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE1M2U3YjU4MTc1YjJmYmJkOWI5NTllZWU5NThmMTM4ZCJ9.PEUN9RBrmLhYwqQULBkqaB1JtMPLLBc6PWPQMEvLPe4&download=image.png "")

```java
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.mapper.ItemsMapper">
  <resultMap id="BaseResultMap" type="com.imooc.item.pojo.Items">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="item_name" jdbcType="VARCHAR" property="itemName" />
    <result column="cat_id" jdbcType="INTEGER" property="catId" />
    <result column="root_cat_id" jdbcType="INTEGER" property="rootCatId" />
    <result column="sell_counts" jdbcType="INTEGER" property="sellCounts" />
    <result column="on_off_status" jdbcType="INTEGER" property="onOffStatus" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="updated_time" jdbcType="TIMESTAMP" property="updatedTime" />
    <result column="content" jdbcType="LONGVARCHAR" property="content" />
  </resultMap>
</mapper>

```

![](https://tcs.teambition.net/storage/31210b935eb11936bc60bf216c7477eb712d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwYjkzNWViMTE5MzZiYzYwYmYyMTZjNzQ3N2ViNzEyZCJ9.9ROfzcIvvJAgR2co0X60JVlKLs_JSlS4TlRE62LPhwQ&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.mapper.ItemsParamMapper">
  <resultMap id="BaseResultMap" type="com.imooc.item.pojo.ItemsParam">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="item_id" jdbcType="VARCHAR" property="itemId" />
    <result column="produc_place" jdbcType="VARCHAR" property="producPlace" />
    <result column="foot_period" jdbcType="VARCHAR" property="footPeriod" />
    <result column="brand" jdbcType="VARCHAR" property="brand" />
    <result column="factory_name" jdbcType="VARCHAR" property="factoryName" />
    <result column="factory_address" jdbcType="VARCHAR" property="factoryAddress" />
    <result column="packaging_method" jdbcType="VARCHAR" property="packagingMethod" />
    <result column="weight" jdbcType="VARCHAR" property="weight" />
    <result column="storage_method" jdbcType="VARCHAR" property="storageMethod" />
    <result column="eat_method" jdbcType="VARCHAR" property="eatMethod" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="updated_time" jdbcType="TIMESTAMP" property="updatedTime" />
  </resultMap>
</mapper>

```

![](https://tcs.teambition.net/storage/3121a23f373677da877687d637a5b2fb088f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhMjNmMzczNjc3ZGE4Nzc2ODdkNjM3YTViMmZiMDg4ZiJ9.d95m73x-zi4qGMO0Kjvm6UuLjuU0hgfF7IYcg2f6Abo&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imooc.item.item.mapper.ItemsSpecMapper">
  <resultMap id="BaseResultMap" type="com.imooc.item.item.pojo.ItemsSpec">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="item_id" jdbcType="VARCHAR" property="itemId" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="stock" jdbcType="INTEGER" property="stock" />
    <result column="discounts" jdbcType="DECIMAL" property="discounts" />
    <result column="price_discount" jdbcType="INTEGER" property="priceDiscount" />
    <result column="price_normal" jdbcType="INTEGER" property="priceNormal" />
    <result column="created_time" jdbcType="TIMESTAMP" property="createdTime" />
    <result column="updated_time" jdbcType="TIMESTAMP" property="updatedTime" />
  </resultMap>
</mapper>

```

开源笔记

可 Pull Requests 协作写开源笔记

gitee

[https://gitee.com/opendevel/java-for-linux](https://gitee.com/opendevel/java-for-linux)

github

[https://github.com/OSrcD/java-for-linux](https://github.com/OSrcD/java-for-linux)

teambition

[https://tburl.in/0jDNvpbK](https://tburl.in/0jDNvpbK)

开源视频

bilibili

[https://space.bilibili.com/77266754](https://space.bilibili.com/77266754)

开源博客

oschina

[https://my.oschina.net/u/4675154](https://my.oschina.net/u/4675154)

csdn

[https://blog.csdn.net/OpenDevel](https://blog.csdn.net/OpenDevel)

开源项目

gitee

[https://gitee.com/opendevel](https://gitee.com/opendevel)

github

[https://github.com/OSrcD](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjMxNywiaWF0IjoxNjEyMTkxNTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.WbzaLNPfJoCBrTr3hzAJItXTIXHh2ambnovgNN4aV7I&download=image.png "")

