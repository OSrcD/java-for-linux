

![](https://tcs.teambition.net/storage/3121cdf0fac4bf5d33ca01a934b6846476c2?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjZGYwZmFjNGJmNWQzM2NhMDFhOTM0YjY4NDY0NzZjMiJ9.lMD5r05_RBtFmhGab0lB7NUEFx-nY-la9xzztLMgk-Y&download=2020-09-17%20174631.png "")

## _version 用于控制乐观锁

![](https://tcs.teambition.net/storage/31211559afca5917123fa79962587f5e4662?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExNTU5YWZjYTU5MTcxMjNmYTc5OTYyNTg3ZjVlNDY2MiJ9.1WHEym6Hobrir9690AjKw0uiS8Ct9lWC3zwTJ6pq7qM&download=image.png "")

![](https://tcs.teambition.net/storage/312128b3ae588abda08eba831f3e0f2ff561?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyOGIzYWU1ODhhYmRhMDhlYmE4MzFmM2UwZjJmZjU2MSJ9.6gSZsrYzsppk7l-h0GPavoKAjVdrDC7dMdF4Bywr0rk&download=image.png "")

![](https://tcs.teambition.net/storage/3121c9aa67b8b50c05b0298c3845bd571805?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjOWFhNjdiOGI1MGMwNWIwMjk4YzM4NDViZDU3MTgwNSJ9.IRVRi1jG2MH296T9QDh7WIzaR7A04n2MRybexAATdNM&download=image.png "")

![](https://tcs.teambition.net/storage/312188c4da24adb0ddad3f39082eb1c01cd9?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4OGM0ZGEyNGFkYjBkZGFkM2YzOTA4MmViMWMwMWNkOSJ9.mRvxHMuIAoa4fX68pKIkZt-FJaVhzm9k698qv2C08yU&download=image.png "")

![](https://tcs.teambition.net/storage/31216b33ff217cff5b58c0fc0569b86146de?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2YjMzZmYyMTdjZmY1YjU4YzBmYzA1NjliODYxNDZkZSJ9.-cH4jIH--Z1J3RK_33XDV7FUXB1NWDcGMI4vtqlLkK0&download=image.png "")

![](https://tcs.teambition.net/storage/31212bb58817d0d6931315b64c2e44b2ab82?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyYmI1ODgxN2QwZDY5MzEzMTViNjRjMmU0NGIyYWI4MiJ9.XEjfiKFPPthTKqJneFVtyV53kHd8ViaUkFl-pSsWAhM&download=image.png "")

![](https://tcs.teambition.net/storage/3121c2e62d9675c64b7907754e0cc3488a38?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjMmU2MmQ5Njc1YzY0Yjc5MDc3NTRlMGNjMzQ4OGEzOCJ9.1pjP2SkPhIz5dPz9brqYOXrZZfhNt9ce1W3i87F2Ezs&download=image.png "")

## _seq_no _primary_term

### 文档发生改变 _seq_no 数值会累加的 在_primary_term中的位置 _primary_term 由谁去分配的 所在的一个位置 在集群里面 会有多个主分片 primary shard 它的位置会分配在某一个地方 相当于是在某一个地方分配的位置 为它做记录的一个编号 

![](https://tcs.teambition.net/storage/3121c55ec5d51f2d11159cfc25c73e69c6a0?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjNTVlYzVkNTFmMmQxMTE1OWNmYzI1YzczZTY5YzZhMCJ9.m3YCu8yDTCo0jyk3M1df0f-vNyj0pRebf_EJEVI2upo&download=image.png "")

![](https://tcs.teambition.net/storage/31218947e469f0e753ccf9d2c033a28988f7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4OTQ3ZTQ2OWYwZTc1M2NjZjlkMmMwMzNhMjg5ODhmNyJ9.zQLKWDoFOSliNHM3MI9L8F8ipH1etcc-j0hq6vZyJjs&download=image.png "")

![](https://tcs.teambition.net/storage/31212523432b74e6ecd973f0e8ec860cd368?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyNTIzNDMyYjc0ZTZlY2Q5NzNmMGU4ZWM4NjBjZDM2OCJ9.tv_4Wl-rsrsESdUl0gO7t3AmgHArOMlFHRqSNauXnKI&download=image.png "")

![](https://tcs.teambition.net/storage/3121614f2e2fdd33d54e8b4671c212daa00a?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MTRmMmUyZmRkMzNkNTRlOGI0NjcxYzIxMmRhYTAwYSJ9.2EID0idf6IvGtnSfRrmGgfLek4B63omxoEyZQaRI6pM&download=image.png "")

## 版本号冲突

![](https://tcs.teambition.net/storage/3121b4522c735f46eb7a864ffae263e21c2e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFiNDUyMmM3MzVmNDZlYjdhODY0ZmZhZTI2M2UyMWMyZSJ9.JlsXJdnU1J7g6_cnUZJ0OpmUJB-Rdd3WGRuuOciQfa4&download=image.png "")

![](https://tcs.teambition.net/storage/31212092f7a5df0cc837638e28795920c60e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyMDkyZjdhNWRmMGNjODM3NjM4ZTI4Nzk1OTIwYzYwZSJ9.ZivrPl6rq9b_YcxT_HpAZevhkxQgOf32-zT8hpWM6zI&download=image.png "")

![](https://tcs.teambition.net/storage/3121e05f380f542f0ad72e0bafaf320633f4?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlMDVmMzgwZjU0MmYwYWQ3MmUwYmFmYWYzMjA2MzNmNCJ9.wTIm0pcxZNmEFiypEl7dkhHXdbQz6esTd4DK_Cqkcos&download=image.png "")

![](https://tcs.teambition.net/storage/312188133d5692b64839f05fb5500accb902?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4ODEzM2Q1NjkyYjY0ODM5ZjA1ZmI1NTAwYWNjYjkwMiJ9.ppREodVuaqSczRjskg2Eyjgk8k91KyT4tTHRxRaAAho&download=image.png "")

> [__https://www.elastic.co/guide/en/elasticsearch/reference/current/optimistic-concurrency-control.html__](https://www.elastic.co/guide/en/elasticsearch/reference/current/optimistic-concurrency-control.html)

![](https://tcs.teambition.net/storage/312173da7442693eb262103d5ed40ed16cc0?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE3M2RhNzQ0MjY5M2ViMjYyMTAzZDVlZDQwZWQxNmNjMCJ9.HJ5P6pBdSKAZ0o-8H-Yoc_xtP5E27M897hVxCNxj-BY&download=image.png "")

![](https://tcs.teambition.net/storage/3121610595f963c9160df846ca0e0b8ef066?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MTA1OTVmOTYzYzkxNjBkZjg0NmNhMGUwYjhlZjA2NiJ9.N8RpJvoiBDIIrmnJhaGmm43pKICZy1656KJlY3H-0f0&download=image.png "")

开源笔记

可 Pull Requests 协作写开源笔记

> [__gitee__](https://gitee.com/opendevel/java-for-linux)

> [__github__](https://github.com/OSrcD/java-for-linux)

> [__Teambition__](https://tburl.in/lPhmsyaa)

开源视频

[OSrcD的个人空间 - 哔哩哔哩 ( ゜- ゜)つロ 乾杯~ Bilibili](https://space.bilibili.com/77266754)

开源博客

[全部博文 - OpenDevel的个人空间 - OSCHINA](https://my.oschina.net/u/4675154?tab=newest&catalogId=0)

开源项目

[OSrcD (OpenDevel) - Gitee.com](https://gitee.com/OpenDevel)

[OSrcD - Overview](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMDcwMjM2OSwiaWF0IjoxNjEwMDk3NTY5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.bpezrxBx-8HaZ0moYHwk1gxqUPbGlaW2hKQfn6HABOs&download=image.png "")

请勿相信图片中任何联系方式

图片来源于视频 作者拿到视频学习已被第三方打码 没办法 截图也没时间去修改图片 请勿相信图片里的任何联系方式

谢谢

