

![](https://tcs.teambition.net/storage/3121f17e653afb304d0ad1a69869f7e8095f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFmMTdlNjUzYWZiMzA0ZDBhZDFhNjk4NjlmN2U4MDk1ZiJ9.dc3SDMbc9GsaIAudSZXk5iwisemaU_VxUw3J_KFVTt8&download=2020-09-17%20052240.jpg "")

![](https://tcs.teambition.net/storage/312193e1f0f545a724ed6148d43f5cdc9633?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE5M2UxZjBmNTQ1YTcyNGVkNjE0OGQ0M2Y1Y2RjOTYzMyJ9.fE_ZtbHNENF8DI06Z9YIsJwg3XGjIGLSHUsPiIyerqI&download=image.png "")

将负载

![](https://tcs.teambition.net/storage/3121dff5daa3834840b1af0f24b2ce9f7258?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkZmY1ZGFhMzgzNDg0MGIxYWYwZjI0YjJjZTlmNzI1OCJ9.FeEHGb3A0MvXMQ9qKG9h5AtadnsO_TJ_OWOSioV7mKE&download=image.png "")

```java

/**
 * 给 RestTemplate 添加了 LoadBalance 功能
 * 不用在代码里面 给RestTemplate 传入具体服务器地址 只要传入服务名 由它自己
 * 给我们选择具体的服务
 */ 
@LoadBalanced 
```



## 启动 第二次

![](https://tcs.teambition.net/storage/31210599346167b028e387699e41e0f68d0f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwNTk5MzQ2MTY3YjAyOGUzODc2OTllNDFlMGY2OGQwZiJ9.FExwefTQjP5s2oKxBySiwvybi9kwwrj2Bo4KzZD0-zo&download=image.png "")

![](https://tcs.teambition.net/storage/312130a8b0c5c344784495df8fc8c8039d9f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzMGE4YjBjNWMzNDQ3ODQ0OTVkZjhmYzhjODAzOWQ5ZiJ9.faZt_3jQtQ8cCSFvnAWnM0xPRFbEfSkjE5kPsZ-Ex9U&download=image.png "")

![](https://tcs.teambition.net/storage/31212d694d5bc1f41e8724097e2d2811f0c8?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyZDY5NGQ1YmMxZjQxZTg3MjQwOTdlMmQyODExZjBjOCJ9.RLQZeSo4SWf-7xeGix2BHWgdBgbkySVsE3yfI_5sDME&download=image.png "")

![](https://tcs.teambition.net/storage/31213d4011bf4e2d3c1f0605155de30c6863?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzZDQwMTFiZjRlMmQzYzFmMDYwNTE1NWRlMzBjNjg2MyJ9.kcJA-NWeUvwfjYHWiD4E5wkic3eitkMzsBnM_l4BvRU&download=image.png "")

```java
package com.imooc.springcloud;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

@RestController
public class Controller {
    @Autowired
    private RestTemplate restTemplate;

    @GetMapping("/sayHi")
    public String sayHi() {
        return restTemplate.getForObject(
                "http://eureka-client/sayHi",
                String.class);

    }
}

```

![](https://tcs.teambition.net/storage/312194cd27daef5acd1ef140da6420c593a3?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE5NGNkMjdkYWVmNWFjZDFlZjE0MGRhNjQyMGM1OTNhMyJ9.mFrfxOjjMxPxYMNNYfexyYaRsY26ruvBuM2tnPmKF3I&download=image.png "")

```java
package com.imooc.springcloud;

import com.netflix.loadbalancer.IRule;
import com.netflix.loadbalancer.RandomRule;
import org.springframework.boot.WebApplicationType;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;
import org.springframework.cloud.client.loadbalancer.LoadBalanced;
import org.springframework.cloud.netflix.ribbon.RibbonClient;
import org.springframework.context.annotation.Bean;
import org.springframework.web.client.RestTemplate;

/**
 * Created by 半仙.
 */
@SpringBootApplication
@EnableDiscoveryClient
public class RibbonConsumerApplication {

    @Bean
    @LoadBalanced
    public RestTemplate template() {
        return new RestTemplate();
    }

    public static void main(String[] args) {
        new SpringApplicationBuilder(RibbonConsumerApplication.class)
                .web(WebApplicationType.SERVLET)
                .run(args);
    }

}

```

![](https://tcs.teambition.net/storage/3121782b4131effd1606f3976dfae038de62?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE3ODJiNDEzMWVmZmQxNjA2ZjM5NzZkZmFlMDM4ZGU2MiJ9.auFFOW8_JOgd1oFYkfU44CrtcGVS6syyuwA8pTD_TJ8&download=image.png "")

```yaml
spring.application.name=ribbon-consumer

server.port=31000

eureka.client.serviceUrl.defaultZone=http://localhost:20000/eureka/



```

![](https://tcs.teambition.net/storage/3121965eeeda9b5fefbe8e0cd118e0979539?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE5NjVlZWVkYTliNWZlZmJlOGUwY2QxMThlMDk3OTUzOSJ9.RbAbBrhcAShbCZtuZUmMlStaXa6Q782ivaH_JUSbMKc&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>spring-cloud-demo</artifactId>
        <groupId>com.imooc</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>ribbon-consumer</artifactId>
    <packaging>jar</packaging>
    <name>ribbon-consumer</name>

    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-ribbon</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>
    </dependencies>

</project>
```

![](https://tcs.teambition.net/storage/3121584fd3fb33ab7b6081987991a177ebce?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE1ODRmZDNmYjMzYWI3YjYwODE5ODc5OTFhMTc3ZWJjZSJ9.89d1poc4RMnHH0nNkRqMVhTuKuXWT2RvWrbos5P3hG8&download=image.png "")

![](https://tcs.teambition.net/storage/312116f9f8eccd820fa572e3310be27fa9f2?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExNmY5ZjhlY2NkODIwZmE1NzJlMzMxMGJlMjdmYTlmMiJ9.lM9z4LhpwlTcBveRfkkw-ea0R_nz6Wro3oBcRLxnfhQ&download=image.png "")

![](https://tcs.teambition.net/storage/31213ffcfd444509b19851d9eb01d123b9d3?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzZmZjZmQ0NDQ1MDliMTk4NTFkOWViMDFkMTIzYjlkMyJ9.4ihJ3bOiHAfn48ulR7GkalUMD6wVZI-wWxBAX7tXD3Q&download=image.png "")

![](https://tcs.teambition.net/storage/3121f09ab96a978824c4adad9f5eaa9997fc?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFmMDlhYjk2YTk3ODgyNGM0YWRhZDlmNWVhYTk5OTdmYyJ9.P6iqVx3TZFxPLSHdBV-CezzZpflimtb0xws6jriXnt0&download=image.png "")

开源笔记

可 Pull Requests 协作写开源笔记

gitee

[https://gitee.com/opendevel/java-for-linux](https://gitee.com/opendevel/java-for-linux)

github

[https://github.com/OSrcD/java-for-linux](https://github.com/OSrcD/java-for-linux)

teambition

[https://tburl.in/0jDNvpbK](https://tburl.in/0jDNvpbK)

开源视频

bilibili

[https://space.bilibili.com/77266754](https://space.bilibili.com/77266754)

开源博客

oschina

[https://my.oschina.net/u/4675154](https://my.oschina.net/u/4675154)

csdn

[https://blog.csdn.net/OpenDevel](https://blog.csdn.net/OpenDevel)

开源项目

gitee

[https://gitee.com/opendevel](https://gitee.com/opendevel)

github

[https://github.com/OSrcD](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NjAwNywiaWF0IjoxNjEyMTkxMjA3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.2SZpJEMoos0MoDhWmxgurqDTFSzA94IHz8NP18Jz9ek&download=image.png "")

