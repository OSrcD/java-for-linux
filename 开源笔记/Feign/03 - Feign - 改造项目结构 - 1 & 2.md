![](https://tcs.teambition.net/storage/312100b243a55ccd2fd5c4244b6383f977d7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwMGIyNDNhNTVjY2QyZmQ1YzQyNDRiNjM4M2Y5NzdkNyJ9.r_j7qnKB-dno7rtYV-Mn5_0n39UcKM4f5yFyCUGedBQ&download=2020-09-17%20053659.png "")

![](https://tcs.teambition.net/storage/312155dd45922477a570fd108954de15af2e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE1NWRkNDU5MjI0NzdhNTcwZmQxMDg5NTRkZTE1YWYyZSJ9.YqmDopuYxz3sKwh22KMyj0yJz54qrfuoI8gPfRNqtq8&download=2020-09-17%20054038.png "")

动态代理 类似双胞胎机制

![](https://tcs.teambition.net/storage/312166bf65222902faccb9f59d030e9b1444?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2NmJmNjUyMjI5MDJmYWNjYjlmNTlkMDMwZTliMTQ0NCJ9.82KDFm74X2jrJu6jEynWM4yvFJBIrAma_PsySwEj5M4&download=image.png "")

创建基于公共接口层的服务消费者





![](https://tcs.teambition.net/storage/31218761477a9c9ef3c663bc64f07e01e804?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4NzYxNDc3YTljOWVmM2M2NjNiYzY0ZjA3ZTAxZTgwNCJ9.UO93ktYeb8LjgB-RGWpw7LCTkHtTcU_OobA5V7XYpUE&download=image.png "")

![](https://tcs.teambition.net/storage/31215f72c36e2f62b6a232aaa12e18196e06?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE1ZjcyYzM2ZTJmNjJiNmEyMzJhYWExMmUxODE5NmUwNiJ9.mnmCIoRpp9Nx-2QQ-7oJPDZurtZee9QcDJnAIj9utBA&download=image.png "")

![](https://tcs.teambition.net/storage/3121df34a6d96f0dde8d0309cf6c9c1bd430?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkZjM0YTZkOTZmMGRkZThkMDMwOWNmNmM5YzFiZDQzMCJ9.Yn89q9aWTF10MJit_hTbvJ1jfMaOxWHVdpJzNfVTOeA&download=image.png "")

![](https://tcs.teambition.net/storage/312181d25ccb2a818c9018873db2c5b5ccbd?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4MWQyNWNjYjJhODE4YzkwMTg4NzNkYjJjNWI1Y2NiZCJ9.mmKgtPIMcxV1if8L5RbZ2bDNtwxFp2s6o6otjv7FrUs&download=image.png "")

要在pom文件依赖Service层

Controller里实现Service层的接口 并且Service里的接口写了GetMapping注解 

Controller没写GetMapping注解 

客户端就可以直接调用Service层写的GetMapping接口 并且调用到Controller层实现的代码了

![](https://tcs.teambition.net/storage/31219cbb6d2cba355bafe5e184438601986e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE5Y2JiNmQyY2JhMzU1YmFmZTVlMTg0NDM4NjAxOTg2ZSJ9.hRpuUm5z-HCFbk-5hXwGb2i8e72qmuyS8AdoZ03z8jM&download=image.png "")

![](https://tcs.teambition.net/storage/3121395e2017b31ce5bb810d350abb3b91c4?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzOTVlMjAxN2IzMWNlNWJiODEwZDM1MGFiYjNiOTFjNCJ9.RyksW50AmFybsUK6yvJDPfvVpYSwUIh11Ql0WpmJ4gY&download=image.png "")

为什么可以 @Autowired进来 这个必须要有实现类注解为 Service 或者 Controller Repository才可以 Feign是利用动态代理机制 注入进来的是动态代理类

而@EnableFeignClients 默认是扫描 该类定义的包路径 会扫描有@FeignClient 注解的 Service层接口 

而我们这里main方法 定义的类包名 恰好与Service层定义的接口包名 一致 所以可以扫描进来

![](https://tcs.teambition.net/storage/31211150e8d15d1dcf2aa009d712cc85b61b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExMTUwZThkMTVkMWRjZjJhYTAwOWQ3MTJjYzg1YjYxYiJ9.0tKMCS_t_GnQgY4s2EwVsxJt1dqjIJeZiuu1iuOrsvo&download=image.png "")



如果包名不一致 可以指定包路径

![](https://tcs.teambition.net/storage/3121232b98a34b9a885ab539a4072ac8da85?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyMzJiOThhMzRiOWE4ODVhYjUzOWE0MDcyYWM4ZGE4NSJ9.x4GfPMIpXOxcjS31f8Ga70xu3e5UxmNJ1d59-74o1Gk&download=image.png "")

或者自己定义一个内部接口 继承Service层   加上 @FeignClient 注解 指定服务提供者名称 也可以将第三方Feign注解引入进来 推荐这种方式

![](https://tcs.teambition.net/storage/31210d5d0c42e8b0993a96e4b99a80499e67?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwZDVkMGM0MmU4YjA5OTNhOTZlNGI5OWE4MDQ5OWU2NyJ9.8lTqm9ztqnaMIHIKzJSo2R2vS5NFF7VjpnxGqazB2C8&download=image.png "")



在Spring cloud中的G版这样子会报错 

![](https://tcs.teambition.net/storage/31214d3467e8aaf5becbd4feced20b9a57fb?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE0ZDM0NjdlOGFhZjViZWNiZDRmZWNlZDIwYjlhNTdmYiJ9.HcNicFqmoiMKOGywT90aMVcGupKCaho33G9BAxtTZu8&download=image.png "")

因为IService 已经被扫包扫进来了 扫进来之后 它这个上面有一个@FeignClient注解 

![](https://tcs.teambition.net/storage/3121d48a9d927b9aeeda7827a58a5a072da1?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkNDhhOWQ5MjdiOWFlZWRhNzgyN2E1OGE1YTA3MmRhMSJ9.CMk2JgOIkdxflclcH1Wuk50NncNA3MFjPtCMimOhTUc&download=image.png "")

在子接口上又声明了一个 @FeignClient 注解 

![](https://tcs.teambition.net/storage/31210d36dd9d014f244fa9b7df39a4ff6bc7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwZDM2ZGQ5ZDAxNGYyNDRmYTliN2RmMzlhNGZmNmJjNyJ9.4yS_qu7aj-tKOI9JwjiGAenRN2WPGJ-fnRIfXVxy_G0&download=image.png "")

在Spring的上下文当中 就有两个IService 接口类型

它不知道 @Autowired  是谁

而且在子接口中覆盖了父接口中的注解 在最新的G版里面 这种做法不行的

F版里 怎么解决  用Primary 我是主要的

![](https://tcs.teambition.net/storage/3121622132cd2231e6a40965daa9295ea2d1?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2MjIxMzJjZDIyMzFlNmE0MDk2NWRhYTkyOTVlYTJkMSJ9.FwlZs_KbfRqTh_GUkY5QSW4FuOaj5pFcOhvmvaHQ2G8&download=image.png "")

下次谁要 Autowired IService类型的 哪就是注解上写了 primary 属性的

在G版里不行



配置文件 属性 可以 注解的重载

![](https://tcs.teambition.net/storage/3121d59688db430fe0cbf1e623cf0f765a93?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkNTk2ODhkYjQzMGZlMGNiZjFlNjIzY2YwZjc2NWE5MyJ9.dBKm6Zw4M0BejUWC_VyHm66IrMGf5uzVbiSrSr_PVf4&download=image.png "")

可以就可以跟F版的一样的

![](https://tcs.teambition.net/storage/3121488588e260139efd7eef072c1f73cd9e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE0ODg1ODhlMjYwMTM5ZWZkN2VlZjA3MmMxZjczY2Q5ZSJ9.fDZ1HYk2hpGoWto4F-5Fg2vPayw6i-hZYwp7Nv1yzLE&download=image.png "")

![](https://tcs.teambition.net/storage/3121963da35babf274f941f674048f505e33?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE5NjNkYTM1YmFiZjI3NGY5NDFmNjc0MDQ4ZjUwNWUzMyJ9.OpwekOmVLx2sD57d6ghyn8WsYijyC7AmMLiinTqmlEU&download=image.png "")

![](https://tcs.teambition.net/storage/312124018107c4ada9ba3088752025c7e080?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyNDAxODEwN2M0YWRhOWJhMzA4ODc1MjAyNWM3ZTA4MCJ9.bzYLSzw3_y5G5mmgKajX9tcYz6tvbJ50nd492ai_sf4&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>spring-cloud-demo</artifactId>
        <groupId>com.imooc</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>
    <packaging>jar</packaging>
    <artifactId>feign-client-intf</artifactId>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-openfeign</artifactId>
        </dependency>



    </dependencies>

</project>
```

![](https://tcs.teambition.net/storage/31214002ac3e602be3b4cebece6679888ca7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE0MDAyYWMzZTYwMmJlM2I0Y2ViZWNlNjY3OTg4OGNhNyJ9.dle_sE87mBQ0GQvvQLgr17xOGq-ruSs71lNngSCu9s0&download=image.png "")

```java
package com.imooc.springcloud;

import lombok.Data;


@Data
public class Friend {

    private String name;

    private String port;

}

```

![](https://tcs.teambition.net/storage/3121d57e9fc7b276fbeff883dc2411e3916e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkNTdlOWZjN2IyNzZmYmVmZjg4M2RjMjQxMWUzOTE2ZSJ9.hBVwd-zDMumdh87lb4CQsYtn2Bdu5ym1jgrrkgNo_HY&download=image.png "")

```java
package com.imooc.springcloud;

import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;

@FeignClient("feign-client")
public interface IService {

    @GetMapping("/sayHi")
    public String sayHi();

    @PostMapping("/sayHi")
    public Friend sayHiPost(@RequestBody Friend friend);

}

```

![](https://tcs.teambition.net/storage/31217dc3cf5c9e762bcfc8b96307382513bc?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE3ZGMzY2Y1YzllNzYyYmNmYzhiOTYzMDczODI1MTNiYyJ9.7qdVGfSF3wFiouF0qvmYcCH_yWtce_02PYupKYpIlBw&download=image.png "")

```java
package com.imooc.springcloud;

import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.web.bind.annotation.RestController;

@RestController
@Slf4j
public class Controller implements IService {

    @Value("${server.port}")
    private String port;

    @Override
    public String sayHi() {
        return "This is " + port;
    }

    @Override
    public Friend sayHiPost(Friend friend) {
        log.info("You are " + friend.getName());
        friend.setPort(port);
        return friend;
    }
}

```

![](https://tcs.teambition.net/storage/31212bb8e07bb7c92ccf67342996e1623303?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyYmI4ZTA3YmI3YzkyY2NmNjczNDI5OTZlMTYyMzMwMyJ9.rIr5BYZPnwE_W7y-KSS6mGFSnw3_tfecbTrW6RxwtIA&download=image.png "")

```java
package com.imooc.springcloud;

import org.springframework.boot.WebApplicationType;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;


@EnableDiscoveryClient
@SpringBootApplication
public class FeignClientApplication {

    public static void main(String[] args) {
        new SpringApplicationBuilder(FeignClientApplication.class)
                .web(WebApplicationType.SERVLET)
                .run(args);
    }

}

```

![](https://tcs.teambition.net/storage/3121810902dc57dbe2a45074ddbab0d659c1?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4MTA5MDJkYzU3ZGJlMmE0NTA3NGRkYmFiMGQ2NTljMSJ9.Ep5Tfqka6C0zdsaEwsSH6PZF91JkQsRY3u5q0yAjdPU&download=image.png "")

```none
spring.application.name=feign-client
server.port=40006


eureka.client.serviceUrl.defaultZone=http://localhost:20000/eureka/
```

![](https://tcs.teambition.net/storage/3121960da4578b029ba29f92e605befab5a7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE5NjBkYTQ1NzhiMDI5YmEyOWY5MmU2MDViZWZhYjVhNyJ9.HMOp6_kdZwgjJwH-oanGZNTiHhP3VscL4vMmcHPruk0&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <appender name="consoleLog" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>INFO</level>
        </filter>
        <layout class="ch.qos.logback.classic.PatternLayout">
            <pattern>
                [%d{HH:mm:ss.SSS}] %-5level %logger{15} - %msg%n
            </pattern>
        </layout>
    </appender>

    <appender name="fileLog" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <encoder>
            <pattern>
                [%d{HH:mm:ss.SSS}] %-5level [%thread]%logger{15} - %msg%n
            </pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/%d.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
    </appender>
    <root level="DEBUG">
        <appender-ref ref = "consoleLog"/>
        <appender-ref ref = "fileLog"/>
    </root>
</configuration>
```

![](https://tcs.teambition.net/storage/3121d4b5b24465397d4f484c9d979f62015d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkNGI1YjI0NDY1Mzk3ZDRmNDg0YzlkOTc5ZjYyMDE1ZCJ9.dPLR4R1ulchhmzZFEDZR0PtHBHVxXUqX6_mw7Z265sk&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>spring-cloud-demo</artifactId>
        <groupId>com.imooc</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>feign-client</artifactId>

    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>

        <dependency>
            <groupId>com.imooc</groupId>
            <artifactId>feign-client-intf</artifactId>
            <version>${project.version}</version>
        </dependency>

    </dependencies>

</project>
```

![](https://tcs.teambition.net/storage/3121ff0d2d46b05635753acdfd7bca21b6e5?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFmZjBkMmQ0NmIwNTYzNTc1M2FjZGZkN2JjYTIxYjZlNSJ9.Vm2-XeRC_WtjUeJ8TAsjU5KfVywG6PZAEz3QDGuH1rU&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>spring-cloud-demo</artifactId>
        <groupId>com.imooc</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>


    <artifactId>feign-consumer-advanced</artifactId>

    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>

        <dependency>
            <groupId>com.imooc</groupId>
            <artifactId>feign-client-intf</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>

</project>
```

![](https://tcs.teambition.net/storage/31216fb8c1d792ee430cd7625956d4251a8e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2ZmI4YzFkNzkyZWU0MzBjZDc2MjU5NTZkNDI1MWE4ZSJ9.kEwm6IShrU5Gt_FgeogXS215657599eUeUSZCDM_8sk&download=image.png "")

```java
package com.imooc.springcloud;

import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@Slf4j
public class Controller {

    @Autowired
    private IService service;

    @GetMapping("/sayHi")
    public String sayHi() {
        return service.sayHi();
    }

    @PostMapping("/sayHi")
    public Friend sayHi2() {
        Friend friend = new Friend();
        friend.setName("test");
        return service.sayHiPost(friend);
    }
}

```

![](https://tcs.teambition.net/storage/312178d160f72227b84f3acfee82ae782f17?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE3OGQxNjBmNzIyMjdiODRmM2FjZmVlODJhZTc4MmYxNyJ9.WBnF8gwPY4OjJRm-nD1DU45DWZLCloJJSfIA2q3iMRs&download=image.png "")

```java
package com.imooc.springcloud;

import org.springframework.boot.WebApplicationType;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;
import org.springframework.cloud.openfeign.EnableFeignClients;
import org.springframework.cloud.openfeign.FeignClient;


@EnableDiscoveryClient
@SpringBootApplication
@EnableFeignClients
public class FeingConsumerApp {

    public static void main(String[] args) {
        new SpringApplicationBuilder(FeingConsumerApp.class)
                .web(WebApplicationType.SERVLET)
                .run(args);
    }

}

```

![](https://tcs.teambition.net/storage/3121b1a8c4b5747fa0d1af4e279da9d67260?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFiMWE4YzRiNTc0N2ZhMGQxYWY0ZTI3OWRhOWQ2NzI2MCJ9.gTe-A-K2FKKqj76lExe_WFmeYCTaFstwjH7voMxuV_A&download=image.png "")

```text
spring.application.name=feign-consumer-advanced
server.port=40001

spring.main.allow-bean-definition-overriding=true

eureka.client.serviceUrl.defaultZone=http://localhost:20000/eureka/




```

![](https://tcs.teambition.net/storage/31216c5a29e218bfa8ba521a6e7341dca6aa?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE2YzVhMjllMjE4YmZhOGJhNTIxYTZlNzM0MWRjYTZhYSJ9.ptl5xYpOWd7tQG5K-C0yD-ZzhuTsIgDAcKru--sZXlI&download=image.png "")

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <appender name="consoleLog" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>INFO</level>
        </filter>
        <layout class="ch.qos.logback.classic.PatternLayout">
            <pattern>
                [%d{HH:mm:ss.SSS}] %-5level %logger{15} - %msg%n
            </pattern>
        </layout>
    </appender>

    <appender name="fileLog" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <encoder>
            <pattern>
                [%d{HH:mm:ss.SSS}] %-5level [%thread]%logger{15} - %msg%n
            </pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/%d.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
    </appender>
    <root level="DEBUG">
        <appender-ref ref = "consoleLog"/>
        <appender-ref ref = "fileLog"/>
    </root>
</configuration>
```











开源笔记

可 Pull Requests 协作写开源笔记

gitee

[https://gitee.com/opendevel/java-for-linux](https://gitee.com/opendevel/java-for-linux)

github

[https://github.com/OSrcD/java-for-linux](https://github.com/OSrcD/java-for-linux)

teambition

[https://tburl.in/0jDNvpbK](https://tburl.in/0jDNvpbK)

开源视频

bilibili

[https://space.bilibili.com/77266754](https://space.bilibili.com/77266754)

开源博客

oschina

[https://my.oschina.net/u/4675154](https://my.oschina.net/u/4675154)

csdn

[https://blog.csdn.net/OpenDevel](https://blog.csdn.net/OpenDevel)

开源项目

gitee

[https://gitee.com/opendevel](https://gitee.com/opendevel)

github

[https://github.com/OSrcD](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2NjI1NywiaWF0IjoxNjEwOTYxNDU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.5SFr8N0_7kMXxWo57ystdQjVPcydE_mOMrfLDy3iiTI&download=image.png "")

