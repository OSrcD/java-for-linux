

![](https://tcs.teambition.net/storage/31215b47d9c0d3546eb57d373eb3678ca0da?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2MTc2NCwiaWF0IjoxNjEwOTU2OTY0LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE1YjQ3ZDljMGQzNTQ2ZWI1N2QzNzNlYjM2NzhjYTBkYSJ9.n9FeKVCJpUiYi2VzP5CjGiZ206Id71GudXwXbGdVVbY&download=2020-09-17+054112.png "")

![](https://tcs.teambition.net/storage/3121fe9aab50899eeb0f61577c781ef41277?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2MzYwOSwiaWF0IjoxNjEwOTU4ODA5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFmZTlhYWI1MDg5OWVlYjBmNjE1NzdjNzgxZWY0MTI3NyJ9.KGVBJ_5mJVgTPmYLr29Gt8yL_QRMjxtnXe-SQ1DLiMk&download=image.png "")

多节点重试





在Feign 里面 起作用

![](https://tcs.teambition.net/storage/3121a9e46612209a18ac0c02517dbf33e070?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2MzcyMSwiaWF0IjoxNjEwOTU4OTIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhOWU0NjYxMjIwOWExOGFjMGMwMjUxN2RiZjMzZTA3MCJ9.5MjXiETgiuU_GzgwGaOyfTYk_Bjym0vSQ1PLIzHgLG0&download=image.png "")



NextServer 在下一个节点重试



![](https://tcs.teambition.net/storage/3121f581a284c2059ce1d1d1b3448dca64be?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2Mzg4NSwiaWF0IjoxNjEwOTU5MDg1LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFmNTgxYTI4NGMyMDU5Y2UxZDFkMWIzNDQ4ZGNhNjRiZSJ9.B0YBMb_QyAPf_cwKxgtai23vCBa3PZeARkVrEge_8Js&download=image.png "")





在生产环境中设置 200 ms 300ms

![](https://tcs.teambition.net/storage/3121e31bbfc75bec79a73ca03ae11108fa11?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2Mzk2MiwiaWF0IjoxNjEwOTU5MTYyLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlMzFiYmZjNzViZWM3OWE3M2NhMDNhZTExMTA4ZmExMSJ9.ozTRGYauPQ3z8L7uuyuBsJcF6EgNGAgABFEIFqX7ltA&download=image.png "")

ReadTimeout 服务响应超时时间

![](https://tcs.teambition.net/storage/3121b52709ad7ca56e20c13a91009eb2960c?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDA0OSwiaWF0IjoxNjEwOTU5MjQ5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFiNTI3MDlhZDdjYTU2ZTIwYzEzYTkxMDA5ZWIyOTYwYyJ9.UzN4zvdCjy--kEqjJqxCM8ng2PlECdur-J1yUNS6B4I&download=image.png "")



默认在Get 请求方法重试

![](https://tcs.teambition.net/storage/312129aa89fcf8f292021cb5fbd3537b46d1?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDEyMSwiaWF0IjoxNjEwOTU5MzIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyOWFhODlmY2Y4ZjI5MjAyMWNiNWZiZDM1MzdiNDZkMSJ9.rDmAoOcByowZB73y0jRfN0H1v2Izmy1RSEFSRNoGZf8&download=image.png "")

幂等性：就是用户对于同一操作发起的一次请求或者多次请求的结果是一致的，不会因为多次点击而产生了副作用





##  启动

![](https://tcs.teambition.net/storage/3121a9a83bf1beec2480afd13a956e3a9212?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDYxNCwiaWF0IjoxNjEwOTU5ODE0LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhOWE4M2JmMWJlZWMyNDgwYWZkMTNhOTU2ZTNhOTIxMiJ9.nBGXxgv09YJxxmjBtP4NLRCtW6qAnWy_YnDJQCiNJ_M&download=image.png "")

![](https://tcs.teambition.net/storage/31213c27f7b76d7acd127c59ae0f0b21b0fe?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDYzOSwiaWF0IjoxNjEwOTU5ODM5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEzYzI3ZjdiNzZkN2FjZDEyN2M1OWFlMGYwYjIxYjBmZSJ9.lbhdMdb7gp5BIcgKjy7tfO2lelAs7QclfiDPHJcttIA&download=image.png "")

![](https://tcs.teambition.net/storage/3121454509664644eb38312675b1764d7e9e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDY1MCwiaWF0IjoxNjEwOTU5ODUwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE0NTQ1MDk2NjQ2NDRlYjM4MzEyNjc1YjE3NjRkN2U5ZSJ9.py5ceGb9XkX1QAHwk1L5UX8ksgEa02Z20E-UYzeVgXk&download=image.png "")

![](https://tcs.teambition.net/storage/312128790405fad512693f8d99846717d5f3?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDY5MCwiaWF0IjoxNjEwOTU5ODkwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEyODc5MDQwNWZhZDUxMjY5M2Y4ZDk5ODQ2NzE3ZDVmMyJ9.Bc0eQPpZE5QGISX8voakeA7D04eMEVM_HfQ0KaP9ITQ&download=image.png "")

![](https://tcs.teambition.net/storage/312113bdcc8d211d6c08905793f43c96fe98?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDcxMCwiaWF0IjoxNjEwOTU5OTEwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExM2JkY2M4ZDIxMWQ2YzA4OTA1NzkzZjQzYzk2ZmU5OCJ9.9TrzzGuxR68UCk6W5mpgQM-yUCn7CIX2NmE8d8xnDG0&download=image.png "")

![](https://tcs.teambition.net/storage/3121eed392ea78abd5e423e0aba9c974184e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDcxNywiaWF0IjoxNjEwOTU5OTE3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlZWQzOTJlYTc4YWJkNWU0MjNlMGFiYTljOTc0MTg0ZSJ9.dOoKwl32axvMvfUPzJQB2tNpEYzU4_CLXKuHfDzpi70&download=image.png "")

![](https://tcs.teambition.net/storage/31217e312566ed15c03a7125fdb60cdc5523?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDcyOCwiaWF0IjoxNjEwOTU5OTI4LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE3ZTMxMjU2NmVkMTVjMDNhNzEyNWZkYjYwY2RjNTUyMyJ9.qxe6GOKrAeUVxjiadgSvPW_LBXZ0naS4i5KwAVSHwOE&download=image.png "")

![](https://tcs.teambition.net/storage/3121c3bb03cf191825f6ddc1fce2444e2e41?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDc0MCwiaWF0IjoxNjEwOTU5OTQwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjM2JiMDNjZjE5MTgyNWY2ZGRjMWZjZTI0NDRlMmU0MSJ9.tp7sQr8mOFZDR4yVDbVVchnRdPlDEZO28zoBBjTqnjY&download=image.png "")

![](https://tcs.teambition.net/storage/3121efd2eae102580dfdd8cd18a7efa2d7b9?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDc0OCwiaWF0IjoxNjEwOTU5OTQ4LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlZmQyZWFlMTAyNTgwZGZkZDhjZDE4YTdlZmEyZDdiOSJ9.rlMnyT3x64dygqT_13iiEHAG0h3awo00sHOij18n_Qw&download=image.png "")

![](https://tcs.teambition.net/storage/3121ce0f95263ed38bb5737288d8e0430cab?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDc1NywiaWF0IjoxNjEwOTU5OTU3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFjZTBmOTUyNjNlZDM4YmI1NzM3Mjg4ZDhlMDQzMGNhYiJ9.8OdIdhPGaisjsR9g0_M4n0nFSAPfl1seATMlRTs9wnM&download=image.png "")

![](https://tcs.teambition.net/storage/3121e588a173e01cf3cf5fa9b6bb61d6b740?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDc2NywiaWF0IjoxNjEwOTU5OTY3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlNTg4YTE3M2UwMWNmM2NmNWZhOWI2YmI2MWQ2Yjc0MCJ9.sIfN0Bb0pIlZTT1Aj6uD-5hkL2tKDd_fbI9WQ0GMEKY&download=image.png "")

![](https://tcs.teambition.net/storage/31211c986c1c54f48e0c35f64734661238cb?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDc3NSwiaWF0IjoxNjEwOTU5OTc1LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjExYzk4NmMxYzU0ZjQ4ZTBjMzVmNjQ3MzQ2NjEyMzhjYiJ9.eww-0joRzAnx-noGzhw-SaUgfRW5kZ-vyv6MpO4XF0s&download=image.png "")

![](https://tcs.teambition.net/storage/3121afb7e7cb408d66f9d750fef2ddc605e8?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NDc4NCwiaWF0IjoxNjEwOTU5OTg0LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZmI3ZTdjYjQwOGQ2NmY5ZDc1MGZlZjJkZGM2MDVlOCJ9.GJvHpR7xWk2d3L4wCrme2OX3Nn-q74hh1H7tdUYkU7I&download=image.png "")

![](https://tcs.teambition.net/storage/3121079b0384373e1577f8532670be0e1378?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NTIxMSwiaWF0IjoxNjEwOTYwNDExLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjEwNzliMDM4NDM3M2UxNTc3Zjg1MzI2NzBiZTBlMTM3OCJ9.K89SIa64BaNzfmkGnaH3kl17tZKM3uR2GyN8aKSosPs&download=image.png "")

```text
spring.application.name=feign-consumer
server.port=40001

eureka.client.serviceUrl.defaultZone=http://localhost:20000/eureka/

# 每台机器最大重试次数 feign-client 是 service name
feign-client.ribbon.MaxAutoRetries=2

# 可以再重试几台机器
feign-client.ribbon.MaxAutoRetriesNextServer=2

# 连接超时
feign-client.ribbon.ConnectTimeout=1000

# 业务处理超时 服务器响应时间
feign-client.ribbon.ReadTimeout=2000

# 在所有HTTP Method进行重试
feign-client.ribbon.OkToRetryOnAllOperations=true

```

![](https://tcs.teambition.net/storage/3121ed276b8734c7326a0694769cc83120cf?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NTIzOSwiaWF0IjoxNjEwOTYwNDM5LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlZDI3NmI4NzM0YzczMjZhMDY5NDc2OWNjODMxMjBjZiJ9.s0lTZQr_PCma_aI_q-cjwlHqyMrsxCfjCKwOi8SzaDo&download=image.png "")

```text
spring.application.name=feign-consumer-advanced
server.port=40001

spring.main.allow-bean-definition-overriding=true

eureka.client.serviceUrl.defaultZone=http://localhost:20000/eureka/

# 每台机器最大重试次数 feign-client 是 service name
feign-client.ribbon.MaxAutoRetries=2

# 可以再重试几台机器
feign-client.ribbon.MaxAutoRetriesNextServer=2

# 连接超时
feign-client.ribbon.ConnectTimeout=1000

# 业务处理超时 服务器响应时间
feign-client.ribbon.ReadTimeout=2000

# 在所有HTTP Method进行重试
feign-client.ribbon.OkToRetryOnAllOperations=true

```

![](https://tcs.teambition.net/storage/3121e386e3a1732644537b2ab139b8ccb3ee?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NTM4NywiaWF0IjoxNjEwOTYwNTg3LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFlMzg2ZTNhMTczMjY0NDUzN2IyYWIxMzliOGNjYjNlZSJ9.sGTBs1qeMQOQXqXV58VBesm2tyNhwmsbadLyva26RE0&download=image.png "")

```java
package com.imooc.springcloud;

import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestParam;

@FeignClient("feign-client")
public interface IService {

    @GetMapping("/sayHi")
    public String sayHi();

    @PostMapping("/sayHi")
    public Friend sayHiPost(@RequestBody Friend friend);

    @GetMapping("/retry")
    public String retry(@RequestParam(name = "timeout") int timeout);
}

```

![](https://tcs.teambition.net/storage/3121dffcf536c2bad51d7bc25ae7e64aecb5?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NTUyOCwiaWF0IjoxNjEwOTYwNzI4LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFkZmZjZjUzNmMyYmFkNTFkN2JjMjVhZTdlNjRhZWNiNSJ9.5mE2P2QXSfEgMu5GChfH2wrBrWGLDvE8aRkdH4u4JN8&download=image.png "")

```java
package com.imooc.springcloud;

import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
@Slf4j
public class Controller implements IService {

    @Value("${server.port}")
    private String port;

    @Override
    public String sayHi() {
        return "This is " + port;
    }

    @Override
    public Friend sayHiPost(Friend friend) {
        log.info("You are " + friend.getName());
        friend.setPort(port);
        return friend;
    }

    @Override
    public String retry(@RequestParam(name="timeout") int timeout) {

        while (--timeout >= 0) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {

            }
        }
        log.info("retry " + port);
        return port;
    }
}

```

![](https://tcs.teambition.net/storage/3121801e0e26ca11e3b79a47be55a5d85284?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IjVmNTQ2ZDkyODI1NWU3ZjU1MzkxZmUwOSIsImV4cCI6MTYxMTU2NTY3MywiaWF0IjoxNjEwOTYwODczLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjE4MDFlMGUyNmNhMTFlM2I3OWE0N2JlNTVhNWQ4NTI4NCJ9.roZIq9DXS77Hig2PWHxezgXxXCE3vam2VvtRjYr3rks&download=image.png "")

```java
package com.imooc.springcloud;

import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@Slf4j
public class Controller {

    @Autowired
    private IService service;

    @GetMapping("/sayHi")
    public String sayHi() {
        return service.sayHi();
    }

    @PostMapping("/sayHi")
    public Friend sayHi2() {
        Friend friend = new Friend();
        friend.setName("test");
        return service.sayHiPost(friend);
    }

    @GetMapping("/retry")
    public String retry(Integer timeout) {
        return service.retry(timeout);
    }
}

```



开源笔记

可 Pull Requests 协作写开源笔记

gitee

[https://gitee.com/opendevel/java-for-linux](https://gitee.com/opendevel/java-for-linux)

github

[https://github.com/OSrcD/java-for-linux](https://github.com/OSrcD/java-for-linux)

teambition

[https://tburl.in/0jDNvpbK](https://tburl.in/0jDNvpbK)

开源视频

bilibili

[https://space.bilibili.com/77266754](https://space.bilibili.com/77266754)

开源博客

oschina

[https://my.oschina.net/u/4675154](https://my.oschina.net/u/4675154)

csdn

[https://blog.csdn.net/OpenDevel](https://blog.csdn.net/OpenDevel)

开源项目

gitee

[https://gitee.com/opendevel](https://gitee.com/opendevel)

github

[https://github.com/OSrcD](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMTU2MTczMywiaWF0IjoxNjEwOTU2OTMzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.bWWh8wQdCo9RCTDvt0rMKxBgBe9pC8dU13x1jPsUEuw&download=image.png "")

