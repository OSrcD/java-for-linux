![](https://tcs.teambition.net/storage/312248563e02815c81648e4bd1305bc2fbb4?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI0ODU2M2UwMjgxNWM4MTY0OGU0YmQxMzA1YmMyZmJiNCJ9.NWG2rcwKJHIhpcDxOJmN3QUUPke3WNywYNaVesIMXUc&download=image.png "")

![](https://tcs.teambition.net/storage/312271d9acbbb8c4ee138b9aa40f302d63da?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI3MWQ5YWNiYmI4YzRlZTEzOGI5YWE0MGYzMDJkNjNkYSJ9._PsjnEjr9b91hqi8wI-cA5ka9AtLREKX8WojEzH-L3c&download=image.png "")

![](https://tcs.teambition.net/storage/3122e7d3dce33179187ca8c080440b3157ca?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJlN2QzZGNlMzMxNzkxODdjYThjMDgwNDQwYjMxNTdjYSJ9.4Fxcm_vCTOdW2wfK3HxWCEETsbF-4LANpp2oKei0vpc&download=image.png "")

![](https://tcs.teambition.net/storage/312286fadad10cfb5e087e8c7963b850a9ab?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4NmZhZGFkMTBjZmI1ZTA4N2U4Yzc5NjNiODUwYTlhYiJ9.2XZJ0rwpKf9CWVgPVp2ck5qfQqJqxOgFAMRXUjZ1SiQ&download=image.png "")

![](https://tcs.teambition.net/storage/3122ade48bf8399ffd4a545023b1ce712654?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJhZGU0OGJmODM5OWZmZDRhNTQ1MDIzYjFjZTcxMjY1NCJ9.Ty5CmhXvYSxtV3svnfz-SJw1PtF9_cUYOhDHe3IPHVY&download=image.png "")

![](https://tcs.teambition.net/storage/31225c984c625623f5f57a6ff20fa62a591c?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI1Yzk4NGM2MjU2MjNmNWY1N2E2ZmYyMGZhNjJhNTkxYyJ9.EeD52drViMjTa6Xb2j8Te6AKbXbGFXFHE3pGyyx4j5w&download=%E6%9C%AA%E6%A0%87%E9%A2%98-2.png "")

![](https://tcs.teambition.net/storage/31220904427e0926bd3b42cd697dff7fece6?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIwOTA0NDI3ZTA5MjZiZDNiNDJjZDY5N2RmZjdmZWNlNiJ9.pCbJjH3jMaxZlcurDqd4WbFQbv5nqHw34TN1y-xxVyY&download=%E6%9C%AA%E6%A0%87%E9%A2%98-2.png "")

![](https://tcs.teambition.net/storage/31224bd222502959e7f4028d3399d1a70736?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI0YmQyMjI1MDI5NTllN2Y0MDI4ZDMzOTlkMWE3MDczNiJ9.DO2E6wMr88LGmv0uhBdGGpyE0vmN12s2ftAXqX-S91U&download=2020-09-17%20061454.png "")

![](https://tcs.teambition.net/storage/31223350f1c9d945cd28b91d2a2a37eeb0af?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIzMzUwZjFjOWQ5NDVjZDI4YjkxZDJhMmEzN2VlYjBhZiJ9.8p5g8WHmPuwpcRS0-LkEUt_uwX6e8Bq_0HSruyNK5lw&download=image.png "")

![](https://tcs.teambition.net/storage/312270c08ccbc48dd6f8a00e111d01ac11f1?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI3MGMwOGNjYmM0OGRkNmY4YTAwZTExMWQwMWFjMTFmMSJ9.kLBjiodH2-rcPj725Vk1A5HE8d-lGpTNbm-FMrxRhTg&download=image.png "")

```java
package com.imooc.springcloud.topic;

import org.springframework.cloud.stream.annotation.Input;
import org.springframework.messaging.SubscribableChannel;

/**
 * input 指的是接收消息的那一端
 * 也就是消费者
 * output 指生产消息的那一端
 * 也就是生产者
 */
public interface MyTopic {

    String INPUT = "myTopic";

    // topic的名称
    @Input(INPUT)
    SubscribableChannel input();
    

}

```

![](https://tcs.teambition.net/storage/3122226ee0aa06bfc41952b1f2732bc425fb?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIyMjZlZTBhYTA2YmZjNDE5NTJiMWYyNzMyYmM0MjVmYiJ9.-2XifCPm8_K7qilojPYYxaGmssVzwiqsaFhz2z7udWU&download=image.png "")

```java
package com.imooc.springcloud.biz;

import com.imooc.springcloud.topic.MyTopic;
import lombok.extern.slf4j.Slf4j;
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.annotation.StreamListener;
import org.springframework.cloud.stream.messaging.Sink;

@Slf4j
/**
 * 启动绑定信道
 * 就是说 Binder与中间件之间绑定的信道接口 接口可以理解为规定好的行为类型的地址
 */
@EnableBinding(value = {

        /**
         * value 可以绑定信道名称
         * Stream 的上下文就会把这个类当做一个可绑定的信道
         * 加入进初始化流程当中
         * 信道跟Topic（主题） 类似的功能 可以看成同一种概念
         * MyTopic.class 通过这种方式我们可以自定义一个信道，将
         * 自定义的主题绑定到EnableBinding注解的下面，这样我们就可以通过Controller触发生产者消息发送，
         * 然后在看消费者是如何消费这个消息的
         * 并且把它加入到上下文当中
         *
         */
        Sink.class,
        MyTopic.class
    }
)
public class StreamConsumer {

    /**
     * 怎么知道 该去rabbitmq 拿那个消息信道中的消息呢？给它指示
     * 传入一个信道的名称
     * sink 它是messaging 给我们提供的一个默认信道
     * @Input("input") 会自动为我们创建一个
     * SubscribableChannel 一个可被订阅的 channel通信通道
     * 通道的名称就是 Sink.INPUT  指定的值 默认为input
     * @StreamListener 将信道绑定到当前的这个方法上 和 RabbitMQ中的主题进行关联
     * 我们的方法体也就能够监听这个信道生成的消息去进行消费
     * 默认目的地信道接口 Sink 翻译为目的地
     * 被注解之后通道与这个类通过反射绑定起来 从应用程序绑定到一起 多个
     * 当binder与消息中间件通信 发送消息过来 通过反射实例化对象执行这些方法
     *
     */
    @StreamListener(Sink.INPUT) // 这里的值就是 "input"
    public void consume(Object payload) {

        log.info("message consumed successfully，payload={}", payload);
    }
    @StreamListener(MyTopic.INPUT) 
    public void consumeMyMessage(Object payload) {

        log.info("message consumed successfully，payload={}", payload);
    }
}

```

![](https://tcs.teambition.net/storage/312222cbbf40d5266615b9a11fbc455b2d53?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIyMmNiYmY0MGQ1MjY2NjE1YjlhMTFmYmM0NTViMmQ1MyJ9.xAi3_OdsXpcbyHGDhMer185s2vRRzMtb6dkCZp3IP80&download=image.png "")

```java
package com.imooc.springcloud.topic;

import org.springframework.cloud.stream.annotation.Input;
import org.springframework.cloud.stream.annotation.Output;
import org.springframework.messaging.MessageChannel;
import org.springframework.messaging.SubscribableChannel;

/**
 * input 指的是接收消息的那一端
 * 也就是消费者
 * output 指生产消息的那一端
 * 也就是生产者
 */
public interface MyTopic {

    String INPUT = "myTopic";

    // topic的名称
    @Input(INPUT)
    SubscribableChannel input();

    @Output(INPUT)
    MessageChannel output();

}

```

![](https://tcs.teambition.net/storage/312285aa9747ef99530fe92346d056be7955?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4NWFhOTc0N2VmOTk1MzBmZTkyMzQ2ZDA1NmJlNzk1NSJ9.9FwqlOEh54jaycp2k8asblBIpsmb7DOKxIRTYNIT4pE&download=image.png "")

![](https://tcs.teambition.net/storage/31223a2e6104a29489c383283234f83a34f1?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIzYTJlNjEwNGEyOTQ4OWMzODMyODMyMzRmODNhMzRmMSJ9.LYDzkC_VvIxFDu7qMgzJA2MoOxEORs_4Lcb_qjiE614&download=image.png "")

```java
package com.imooc.springcloud.biz;

import com.imooc.springcloud.topic.MyTopic;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.messaging.support.MessageBuilder;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
@Slf4j
public class Controller {

    @Autowired
    private MyTopic producer;

    @PostMapping("send")
    public void sendMessage(@RequestParam(value = "body") String body) {
        producer.output().send(MessageBuilder.withPayload(body).build());
    }


}

```

![](https://tcs.teambition.net/storage/31221aaa8387decb26b014a8f4f715686f0a?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIxYWFhODM4N2RlY2IyNmIwMTRhOGY0ZjcxNTY4NmYwYSJ9.DYqW-1iWrjjqKPq-n2dS4w1QtQZZbCnlY14czW0UvAY&download=image.png "")

```text
/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:51228,suspend=y,server=n -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always -javaagent:/Users/virtualman/Library/Caches/JetBrains/IntelliJIdea2021.1/groovyHotSwap/gragent.jar -javaagent:/Users/virtualman/Library/Caches/JetBrains/IntelliJIdea2021.1/captureAgent/debugger-agent.jar -agentpath:/private/var/folders/f7/h5k23k254y14yl9frqxjmjzh0000gn/T/libmemory_agent.dylib= -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath /Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/charsets.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/deploy.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/javaws.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/jce.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/jfr.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/jfxswt.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/jsse.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/management-agent.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/plugin.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/resources.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/jre/lib/rt.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/ant-javafx.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/dt.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/javafx-mx.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/jconsole.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/packager.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/sa-jdi.jar:/Users/virtualman/Downloads/temp/jdk1.8.0_181.jdk/Contents/Home/lib/tools.jar:/Users/virtualman/IdeaProjects/java-for-linux/java-for-alibaba/spring-cloud-demo/stream/stream-sample/target/classes:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.1.15.RELEASE/spring-boot-starter-web-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter/2.1.15.RELEASE/spring-boot-starter-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot/2.1.15.RELEASE/spring-boot-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.1.15.RELEASE/spring-boot-autoconfigure-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.1.15.RELEASE/spring-boot-starter-logging-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar:/Users/virtualman/.m2/repository/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar:/Users/virtualman/.m2/repository/org/slf4j/slf4j-api/1.7.30/slf4j-api-1.7.30.jar:/Users/virtualman/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.11.2/log4j-to-slf4j-2.11.2.jar:/Users/virtualman/.m2/repository/org/apache/logging/log4j/log4j-api/2.11.2/log4j-api-2.11.2.jar:/Users/virtualman/.m2/repository/org/slf4j/jul-to-slf4j/1.7.30/jul-to-slf4j-1.7.30.jar:/Users/virtualman/.m2/repository/javax/annotation/javax.annotation-api/1.3.2/javax.annotation-api-1.3.2.jar:/Users/virtualman/.m2/repository/org/springframework/spring-core/5.1.16.RELEASE/spring-core-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-jcl/5.1.16.RELEASE/spring-jcl-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/yaml/snakeyaml/1.23/snakeyaml-1.23.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.1.15.RELEASE/spring-boot-starter-json-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.9.10.4/jackson-databind-2.9.10.4.jar:/Users/virtualman/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.9.10/jackson-annotations-2.9.10.jar:/Users/virtualman/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.9.10/jackson-core-2.9.10.jar:/Users/virtualman/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.9.10/jackson-datatype-jdk8-2.9.10.jar:/Users/virtualman/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.9.10/jackson-datatype-jsr310-2.9.10.jar:/Users/virtualman/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.9.10/jackson-module-parameter-names-2.9.10.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.1.15.RELEASE/spring-boot-starter-tomcat-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.36/tomcat-embed-core-9.0.36.jar:/Users/virtualman/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.36/tomcat-embed-el-9.0.36.jar:/Users/virtualman/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.36/tomcat-embed-websocket-9.0.36.jar:/Users/virtualman/.m2/repository/org/hibernate/validator/hibernate-validator/6.0.20.Final/hibernate-validator-6.0.20.Final.jar:/Users/virtualman/.m2/repository/javax/validation/validation-api/2.0.1.Final/validation-api-2.0.1.Final.jar:/Users/virtualman/.m2/repository/org/jboss/logging/jboss-logging/3.3.3.Final/jboss-logging-3.3.3.Final.jar:/Users/virtualman/.m2/repository/com/fasterxml/classmate/1.4.0/classmate-1.4.0.jar:/Users/virtualman/.m2/repository/org/springframework/spring-web/5.1.16.RELEASE/spring-web-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-beans/5.1.16.RELEASE/spring-beans-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-webmvc/5.1.16.RELEASE/spring-webmvc-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-aop/5.1.16.RELEASE/spring-aop-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-context/5.1.16.RELEASE/spring-context-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-expression/5.1.16.RELEASE/spring-expression-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-actuator/2.1.15.RELEASE/spring-boot-starter-actuator-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-actuator-autoconfigure/2.1.15.RELEASE/spring-boot-actuator-autoconfigure-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-actuator/2.1.15.RELEASE/spring-boot-actuator-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/io/micrometer/micrometer-core/1.1.14/micrometer-core-1.1.14.jar:/Users/virtualman/.m2/repository/org/hdrhistogram/HdrHistogram/2.1.9/HdrHistogram-2.1.9.jar:/Users/virtualman/.m2/repository/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar:/Users/virtualman/.m2/repository/org/springframework/cloud/spring-cloud-starter-stream-rabbit/2.1.2.RELEASE/spring-cloud-starter-stream-rabbit-2.1.2.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/cloud/spring-cloud-stream-binder-rabbit/2.1.2.RELEASE/spring-cloud-stream-binder-rabbit-2.1.2.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/cloud/spring-cloud-stream-binder-rabbit-core/2.1.2.RELEASE/spring-cloud-stream-binder-rabbit-core-2.1.2.RELEASE.jar:/Users/virtualman/.m2/repository/com/rabbitmq/http-client/2.1.0.RELEASE/http-client-2.1.0.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/cloud/spring-cloud-stream/2.1.2.RELEASE/spring-cloud-stream-2.1.2.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-validation/2.1.15.RELEASE/spring-boot-starter-validation-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-messaging/5.1.16.RELEASE/spring-messaging-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-tuple/1.0.0.RELEASE/spring-tuple-1.0.0.RELEASE.jar:/Users/virtualman/.m2/repository/com/esotericsoftware/kryo-shaded/3.0.3/kryo-shaded-3.0.3.jar:/Users/virtualman/.m2/repository/com/esotericsoftware/minlog/1.3.0/minlog-1.3.0.jar:/Users/virtualman/.m2/repository/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/Users/virtualman/.m2/repository/org/springframework/integration/spring-integration-tuple/1.0.0.RELEASE/spring-integration-tuple-1.0.0.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/retry/spring-retry/1.2.5.RELEASE/spring-retry-1.2.5.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/cloud/spring-cloud-function-context/2.0.1.RELEASE/spring-cloud-function-context-2.0.1.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/cloud/spring-cloud-function-core/2.0.1.RELEASE/spring-cloud-function-core-2.0.1.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/boot/spring-boot-starter-amqp/2.1.15.RELEASE/spring-boot-starter-amqp-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/amqp/spring-rabbit/2.1.15.RELEASE/spring-rabbit-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/com/rabbitmq/amqp-client/5.4.3/amqp-client-5.4.3.jar:/Users/virtualman/.m2/repository/org/springframework/amqp/spring-amqp/2.1.15.RELEASE/spring-amqp-2.1.15.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/integration/spring-integration-amqp/5.1.11.RELEASE/spring-integration-amqp-5.1.11.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/integration/spring-integration-core/5.1.11.RELEASE/spring-integration-core-5.1.11.RELEASE.jar:/Users/virtualman/.m2/repository/org/springframework/spring-tx/5.1.16.RELEASE/spring-tx-5.1.16.RELEASE.jar:/Users/virtualman/.m2/repository/io/projectreactor/reactor-core/3.2.18.RELEASE/reactor-core-3.2.18.RELEASE.jar:/Users/virtualman/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar:/Users/virtualman/.m2/repository/org/springframework/integration/spring-integration-jmx/5.1.11.RELEASE/spring-integration-jmx-5.1.11.RELEASE.jar:/Users/virtualman/.m2/repository/org/apache/httpcomponents/httpclient/4.5.12/httpclient-4.5.12.jar:/Users/virtualman/.m2/repository/org/apache/httpcomponents/httpcore/4.4.13/httpcore-4.4.13.jar:/Users/virtualman/.m2/repository/commons-codec/commons-codec/1.11/commons-codec-1.11.jar:/Users/virtualman/.m2/repository/org/projectlombok/lombok/1.18.8/lombok-1.18.8.jar:/Users/virtualman/Library/Application Support/JetBrains/Toolbox/apps/IDEA-U/ch-0/211.4961.33/IntelliJ IDEA 2021.1 EAP.app/Contents/lib/idea_rt.jar com.imooc.springcloud.StreamApplication
Connected to the target VM, address: '127.0.0.1:51228', transport: 'socket'

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::       (v2.1.15.RELEASE)

2021-01-30 22:54:54.882  INFO 54593 --- [           main] com.imooc.springcloud.StreamApplication  : Starting StreamApplication on OpenDevel.local with PID 54593 (/Users/virtualman/IdeaProjects/java-for-linux/java-for-alibaba/spring-cloud-demo/stream/stream-sample/target/classes started by virtualman in /Users/virtualman/IdeaProjects/java-for-linux)
2021-01-30 22:54:54.907  INFO 54593 --- [           main] com.imooc.springcloud.StreamApplication  : No active profile set, falling back to default profiles: default
2021-01-30 22:54:58.041  WARN 54593 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'myTopic' defined in com.imooc.springcloud.topic.MyTopic: bean definition with this name already exists - Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=com.imooc.springcloud.topic.MyTopic; factoryMethodName=input; initMethodName=null; destroyMethodName=null
2021-01-30 22:54:58.114  INFO 54593 --- [           main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-01-30 22:54:58.162 ERROR 54593 --- [           main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'myTopic' defined in com.imooc.springcloud.topic.MyTopic: bean definition with this name already exists - Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=com.imooc.springcloud.topic.MyTopic; factoryMethodName=input; initMethodName=null; destroyMethodName=null
	at org.springframework.cloud.stream.binding.BindingBeanDefinitionRegistryUtils.registerBindingTargetBeanDefinition(BindingBeanDefinitionRegistryUtils.java:68) ~[spring-cloud-stream-2.1.2.RELEASE.jar:2.1.2.RELEASE]
	at org.springframework.cloud.stream.binding.BindingBeanDefinitionRegistryUtils.registerOutputBindingTargetBeanDefinition(BindingBeanDefinitionRegistryUtils.java:55) ~[spring-cloud-stream-2.1.2.RELEASE.jar:2.1.2.RELEASE]
	at org.springframework.cloud.stream.binding.BindingBeanDefinitionRegistryUtils.lambda$registerBindingTargetBeanDefinitions$0(BindingBeanDefinitionRegistryUtils.java:92) ~[spring-cloud-stream-2.1.2.RELEASE.jar:2.1.2.RELEASE]
	at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:410) ~[spring-core-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:389) ~[spring-core-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.cloud.stream.binding.BindingBeanDefinitionRegistryUtils.registerBindingTargetBeanDefinitions(BindingBeanDefinitionRegistryUtils.java:82) ~[spring-cloud-stream-2.1.2.RELEASE.jar:2.1.2.RELEASE]
	at org.springframework.cloud.stream.config.BindingBeansRegistrar.registerBeanDefinitions(BindingBeansRegistrar.java:44) ~[spring-cloud-stream-2.1.2.RELEASE.jar:2.1.2.RELEASE]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:363) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[na:1.8.0_181]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:362) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:145) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:117) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:327) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:232) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:95) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:706) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) ~[spring-context-5.1.16.RELEASE.jar:5.1.16.RELEASE]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.1.15.RELEASE.jar:2.1.15.RELEASE]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744) [spring-boot-2.1.15.RELEASE.jar:2.1.15.RELEASE]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391) [spring-boot-2.1.15.RELEASE.jar:2.1.15.RELEASE]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) [spring-boot-2.1.15.RELEASE.jar:2.1.15.RELEASE]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.1.15.RELEASE.jar:2.1.15.RELEASE]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1204) [spring-boot-2.1.15.RELEASE.jar:2.1.15.RELEASE]
	at com.imooc.springcloud.StreamApplication.main(StreamApplication.java:11) [classes/:na]

Disconnected from the target VM, address: '127.0.0.1:51228', transport: 'socket'

Process finished with exit code 1


```

![](https://tcs.teambition.net/storage/312285771a82bfe921324efabc667e5b4982?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4NTc3MWE4MmJmZTkyMTMyNGVmYWJjNjY3ZTViNDk4MiJ9.Pl1fWna5uCanLYLNHZErLvXaLaxtQclStga9SZa_Xx4&download=image.png "")

```java
package com.imooc.springcloud.biz;

import com.imooc.springcloud.topic.MyTopic;
import lombok.extern.slf4j.Slf4j;
import org.springframework.cloud.stream.annotation.EnableBinding;
import org.springframework.cloud.stream.annotation.StreamListener;
import org.springframework.cloud.stream.messaging.Sink;

@Slf4j
/**
 * 启动绑定信道
 * 就是说 Binder与中间件之间绑定的信道接口 接口可以理解为规定好的行为类型的地址
 */
@EnableBinding(value = {

        /**
         * value 可以绑定信道名称
         * Stream 的上下文就会把这个类当做一个可绑定的信道
         * 加入进初始化流程当中
         * 信道跟Topic（主题） 类似的功能 可以看成同一种概念
         * MyTopic.class 通过这种方式我们可以自定义一个信道，将
         * 自定义的主题绑定到EnableBinding注解的下面，这样我们就可以通过Controller触发生产者消息发送，
         * 然后在看消费者是如何消费这个消息的
         * 并且把它加入到上下文当中
         *
         */
        Sink.class,
        MyTopic.class
    }
)
public class StreamConsumer {

    /**
     * 怎么知道 该去rabbitmq 拿那个消息信道中的消息呢？给它指示
     * 传入一个信道的名称
     * sink 它是messaging 给我们提供的一个默认信道
     * @Input("input") 会自动为我们创建一个
     * SubscribableChannel 一个可被订阅的 channel通信通道
     * 通道的名称就是 Sink.INPUT  指定的值 默认为input
     * @StreamListener 将信道绑定到当前的这个方法上 和 RabbitMQ中的主题进行关联
     * 我们的方法体也就能够监听这个信道生成的消息去进行消费
     * 默认目的地信道接口 Sink 翻译为目的地
     * 被注解之后通道与这个类通过反射绑定起来 从应用程序绑定到一起 多个
     * 当binder与消息中间件通信 发送消息过来 通过反射实例化对象执行这些方法
     *
     */
    @StreamListener(Sink.INPUT) // 这里的值就是 "input"
    public void consume(Object payload) {

        log.info("message consumed successfully，payload={}", payload);
    }
    @StreamListener(MyTopic.INPUT) // 这里的值就是 "input"
    public void consumeMyMessage(Object payload) {

        log.info("message consumed successfully，payload={}", payload);
    }
}

```

![](https://tcs.teambition.net/storage/3122cc526f257c590fc530b411f8f2668c31?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJjYzUyNmYyNTdjNTkwZmM1MzBiNDExZjhmMjY2OGMzMSJ9.4wBrrT3uPwy68dZ5xYlN3f22PywpPjV6zr5lOBbRtPY&download=image.png "")

```java
package com.imooc.springcloud.topic;

import org.springframework.cloud.stream.annotation.Input;
import org.springframework.cloud.stream.annotation.Output;
import org.springframework.messaging.MessageChannel;
import org.springframework.messaging.SubscribableChannel;

/**
 * input 指的是接收消息的那一端
 * 也就是消费者
 * output 指生产消息的那一端
 * 也就是生产者
 */
public interface MyTopic {

    /**
     * 把两个 信道绑定在一起
     */
    String INPUT = "myTopic-consumer";

    String OUTPUT = "myTopic-producer";

    // topic的名称
    @Input(INPUT)
    SubscribableChannel input();

    /**
     * INPUT 会当成一个 Bean 的 name
     * 相当于声明了 2 个 Bean 都有同样的 name Spring 启动的时候就会报错
     */
    @Output(OUTPUT)
    MessageChannel output();

}

```

![](https://tcs.teambition.net/storage/312216d031246fc7a46a60810b951a4da07f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIxNmQwMzEyNDZmYzdhNDZhNjA4MTBiOTUxYTRkYTA3ZiJ9.jLMBZgzAEB0o9tuuW9I4PcoCyiSv-BQAyEtKGeW6Ptc&download=image.png "")

```text
spring.application.name=stream-sample
server.port=63001
#server.port=63000

# RabbitMQ连接字符串
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# 把两个不同名称的信道 绑定 在一起 重定向到 目的地 一个真正的 Topic
# 不同的信道 绑定到相同的 Topic当中 当生产者发送消息 到指定的 Topic 消费者就可以消费
# 绑定Channel到broadcast
spring.cloud.stream.bindings.myTopic-consumer.destination=broadcast
spring.cloud.stream.bindings.myTopic-producer.destination=broadcast

management.security.enabled.user.name=gitee
management.security.enabled.user.password=gitee
management.security.enabled.user.roles=ADMIN

management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

```

![](https://tcs.teambition.net/storage/3122efa79171f4e1e602f9b113bbf7728e97?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJlZmE3OTE3MWY0ZTFlNjAyZjliMTEzYmJmNzcyOGU5NyJ9.0ZvqpNH6JT08kZlAIDIO499FwqD644tEFzr8URr8bdM&download=image.png "")

![](https://tcs.teambition.net/storage/31228ae9d3fb3367ebd2785a96b643cf9480?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4YWU5ZDNmYjMzNjdlYmQyNzg1YTk2YjY0M2NmOTQ4MCJ9.JLgWsl201-rxa8-fzqKsxwnoboWC-60Xb4EozqFgb_o&download=image.png "")

![](https://tcs.teambition.net/storage/3122bab7eefd7e897baec6e75b7fb1563616?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJiYWI3ZWVmZDdlODk3YmFlYzZlNzViN2ZiMTU2MzYxNiJ9.LlvhBzxIr2AP7yvFHp_rMC_q6loX6E4CCebW1spu6U0&download=image.png "")

![](https://tcs.teambition.net/storage/31222a9fe25557ebd848478b1f366688cd5d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjIyYTlmZTI1NTU3ZWJkODQ4NDc4YjFmMzY2Njg4Y2Q1ZCJ9.Bn0F-PoPyxT973_WBr995zz1TZmt1k1qIirNBJNKysk&download=image.png "")

![](https://tcs.teambition.net/storage/3122f5707d18a8e2883b7ae2827918bb077a?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJmNTcwN2QxOGE4ZTI4ODNiN2FlMjgyNzkxOGJiMDc3YSJ9.31Ix0eZXi3tHjlo4L4thatSED8IWtEMJt_SIJ_9mx_Q&download=image.png "")



![](https://tcs.teambition.net/storage/3122631db2aa71ac08697a3e39f802decb2e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI2MzFkYjJhYTcxYWMwODY5N2EzZTM5ZjgwMmRlY2IyZSJ9.2X2ALv28U5eMfSBHhJVoVFAPk7upWSljPjeGmXwlRrw&download=image.png "")

```text
2021-01-31 09:52:17.252  INFO 5624 --- [j-QPr7VuHTYFw-1] c.imooc.springcloud.biz.StreamConsumer   : message consumed successfully，payload=Hello Broadcast


```

![](https://tcs.teambition.net/storage/3122c1c9349939037b89d870d6a15b8386b8?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJjMWM5MzQ5OTM5MDM3Yjg5ZDg3MGQ2YTE1YjgzODZiOCJ9.CwaPGidTpJOy5n3bDJ_cRHAl7Ra5s_8eSNFRmrp_mXA&download=image.png "")

```text
2021-01-31 09:52:17.251  INFO 5919 --- [MqMkGG4Njye8Q-1] c.imooc.springcloud.biz.StreamConsumer   : message consumed successfully，payload=Hello Broadcast


```

![](https://tcs.teambition.net/storage/3122a52c2516bf89d377b5b000899b23122e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJhNTJjMjUxNmJmODlkMzc3YjViMDAwODk5YjIzMTIyZSJ9.A-oBQBjq-OPJIjDTF8CvyVCdkLVAEKN2Y7g72e68eA0&download=image.png "")

![](https://tcs.teambition.net/storage/3122f624135f6d059976e529230ca35744ed?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJmNjI0MTM1ZjZkMDU5OTc2ZTUyOTIzMGNhMzU3NDRlZCJ9.JnmI3MmibGjEBZZBdVjM6ktZnrB749QoPR1rTkNmMAc&download=image.png "")

Exchanges 与 Queues 之间的绑定 就是bindings

![](https://tcs.teambition.net/storage/312278852c780d0763d5fc67babab875fd65?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI3ODg1MmM3ODBkMDc2M2Q1ZmM2N2JhYmFiODc1ZmQ2NSJ9.619Kl3znKIet1S2NFgg8dVCsQb9XED7wBCH8pSe81SA&download=image.png "")

![](https://tcs.teambition.net/storage/31226906ca9a18f18088c4cfe861e80bff8d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI2OTA2Y2E5YTE4ZjE4MDg4YzRjZmU4NjFlODBiZmY4ZCJ9.zOPw_HpcwZAq2uKGVyj1KICyC1SUm2o4zj62nuJxKE0&download=image.png "")

![](https://tcs.teambition.net/storage/3122984810cd4b43b29d91a99fab7f63218e?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI5ODQ4MTBjZDRiNDNiMjlkOTFhOTlmYWI3ZjYzMjE4ZSJ9.6VSBXJdEjvKePGVrElB1HZTTLKBP4u9bXbGn_3L95x8&download=image.png "")

![](https://tcs.teambition.net/storage/312283104fa489b1297c5e66da4b2e847509?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4MzEwNGZhNDg5YjEyOTdjNWU2NmRhNGIyZTg0NzUwOSJ9.sa9OwBnaUogUUdfaFyXr9E2e9mgXgO_LRyqnz9g0ogQ&download=image.png "")



```text
2021-01-31 09:52:17.251  INFO 5919 --- [MqMkGG4Njye8Q-1] c.imooc.springcloud.biz.StreamConsumer   : message consumed successfully，payload=Hello Broadcast
2021-01-31 09:57:13.984  INFO 5919 --- [MqMkGG4Njye8Q-1] c.imooc.springcloud.biz.StreamConsumer   : message consumed successfully，payload=Queue Test


```

Queue就是连上 我们应用程序的consumer\producer了 都对应后台的一个监听队列 

![](https://tcs.teambition.net/storage/3122aa374e603561fe1159ee87bcf1ab324d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJhYTM3NGU2MDM1NjFmZTExNTllZTg3YmNmMWFiMzI0ZCJ9._ryCr7WNUseYTf8gyICa3NaZNtyVy4I8yOsCNOd188Y&download=image.png "")

![](https://tcs.teambition.net/storage/312269e926e9d2ccb4974a6c5c7bce1d709c?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI2OWU5MjZlOWQyY2NiNDk3NGE2YzVjN2JjZTFkNzA5YyJ9.WLhIUO9pyWz5qK424HshwdX4UiyRLYlFLKHefhmn5i4&download=image.png "")

![](https://tcs.teambition.net/storage/3122800927328a0a2c3e2665c1017b31f7c7?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjI4MDA5MjczMjhhMGEyYzNlMjY2NWMxMDE3YjMxZjdjNyJ9.9aFte2L9Nh-GQ9MhBLwBGW2y8LpUxF8edOrJ77mKJh0&download=image.png "")

![](https://tcs.teambition.net/storage/3122c29b08fc73ae3e3bf91d2d4dea2982bb?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjJjMjliMDhmYzczYWUzZTNiZjkxZDJkNGRlYTI5ODJiYiJ9.HP3K2rUKkKTFmYAHmWKebfZJuLSmDGdeuy7VsqLrx8U&download=image.png "")

```text
2021-01-31 09:52:17.252  INFO 5624 --- [j-QPr7VuHTYFw-1] c.imooc.springcloud.biz.StreamConsumer   : message consumed successfully，payload=Hello Broadcast
2021-01-31 09:59:11.335  INFO 5624 --- [j-QPr7VuHTYFw-1] c.imooc.springcloud.biz.StreamConsumer   : message consumed successfully，payload=Test 2


```







开源笔记

可 Pull Requests 协作写开源笔记

如果笔记图片无法访问 请访问 [teambition](https://tburl.in/0jDNvpbK) 原版开源笔记

gitee

[https://gitee.com/opendevel/java-for-linux](https://gitee.com/opendevel/java-for-linux)

github

[https://github.com/OSrcD/java-for-linux](https://github.com/OSrcD/java-for-linux)

teambition

[https://tburl.in/0jDNvpbK](https://tburl.in/0jDNvpbK)

开源视频

bilibili

[https://space.bilibili.com/77266754](https://space.bilibili.com/77266754)

开源博客

oschina

[https://my.oschina.net/u/4675154](https://my.oschina.net/u/4675154)

csdn

[https://blog.csdn.net/OpenDevel](https://blog.csdn.net/OpenDevel)

开源项目

gitee

[https://gitee.com/opendevel](https://gitee.com/opendevel)

github

[https://github.com/OSrcD](https://github.com/OSrcD)

开源赞赏

![](https://tcs.teambition.net/storage/3121aed56e96d914e1046f3b498b493ce232?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9hcHBJZCI6IjU5Mzc3MGZmODM5NjMyMDAyZTAzNThmMSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxMjc5NTEyMywiaWF0IjoxNjEyMTkwMzIzLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzMxMjFhZWQ1NmU5NmQ5MTRlMTA0NmYzYjQ5OGI0OTNjZTIzMiJ9.GjF1hcCKJ2x8wBY2uW25OtDXZQvItsIr1iUbd4h_ptM&download=image.png "")

